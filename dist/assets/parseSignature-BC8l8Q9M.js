const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D9bD1uxn.js","assets/index-DJp7veNu.js","assets/index-C0K0zGVm.css","assets/hashTypedData-0Lj_IAgC.js"])))=>i.map(i=>d[i]);
import{ab as _,ad as Vt,aj as N,aM as qt,ao as q,aL as ie,aJ as Ae,aN as Wo,aC as ce,aI as $e,ac as ze,ap as we,aO as Ko,aP as Yo,aB as ye,aQ as Jo,aR as Xo,aS as sr,aT as Qo,ae as ht,af as Ge,as as Hs,aU as Ft,aV as nt,aW as Vr,aX as qr,aY as Zr,aZ as Wr,a_ as Kr,a$ as Yr,b0 as Jr,b1 as Xr,b2 as Rt,b3 as xt,b4 as Qr,ag as js,b5 as ea,b6 as Ot,b7 as es,b8 as Ds,b9 as Rn,ba as ta,bb as On,ah as bt,bc as ts,bd as Vs,be as ns,bf as na,aA as mn,an as ra,al as sa,bg as qs,bh as rs,bi as ia}from"./index-DJp7veNu.js";import{f as Re,g as Zs,j as Ws,l as Ks,m as st,A as ss,n as qe,t as ir,k as Ue,b as vt,o as Pt,p as Ys,q as Js,r as oa,u as Xs,v as aa,s as pt,w as or,x as Qs,d as be,i as oe,I as ue,H as ei,y as yn,z as Lt,B as ti,C as ni,D as ca,E as _t,F as ua,G as pe,e as he,J as fa,K as da,L as ar,M as Mt,N as Gt,O as ri,P as la,Q as is,R as os,S as ba,T as as,U as ha,V as pa,c as si,W as ma,X as ya,Y as ga,Z as wa,_ as xa,$ as va,a0 as ii,a1 as Pa,a2 as Ea,a3 as Ba,a4 as Ia,a5 as Aa,a6 as $a,a7 as Ln,h as oi,a as Sa}from"./hashTypedData-0Lj_IAgC.js";const Ta="1.2.3";let Q=class _n extends Error{constructor(t,n={}){var o;const r=n.cause instanceof _n?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof _n&&n.cause.docsPath||n.docsPath,i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Ta}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};const ai=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Na(e){return ai.test(e)}function ka(e){return Re(ai,e)}const ci=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Fa(e){return ci.test(e)}function Ca(e){return Re(ci,e)}const ui=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function za(e){return ui.test(e)}function Ra(e){return Re(ui,e)}const fi=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Zt(e){return fi.test(e)}function Oa(e){return Re(fi,e)}const di=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function La(e){return di.test(e)}function _a(e){return Re(di,e)}const li=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Ma(e){return li.test(e)}function Ga(e){return Re(li,e)}const Ua=/^receive\(\) external payable$/;function Ha(e){return Ua.test(e)}const cs=new Set(["memory","indexed","storage","calldata"]),ja=new Set(["indexed"]),Mn=new Set(["calldata","memory","storage"]);class Da extends Q{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Va extends Q{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class qa extends Q{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Za extends Q{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class Wa extends Q{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Ka extends Q{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ya extends Q{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Ja extends Q{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Xa extends Q{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class it extends Q{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Qa extends Q{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class e0 extends Q{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class t0 extends Q{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class n0 extends Q{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function r0(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return t?`${t}:${e}${r}`:`${e}${r}`}const gn=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Gn(e,t={}){if(za(e))return s0(e,t);if(Fa(e))return i0(e,t);if(Na(e))return o0(e,t);if(La(e))return a0(e,t);if(Ma(e))return c0(e);if(Ha(e))return{type:"receive",stateMutability:"payable"};throw new Qa({signature:e})}function s0(e,t={}){const n=Ra(e);if(!n)throw new it({signature:e,type:"function"});const r=ee(n.parameters),s=[],i=r.length;for(let c=0;c<i;c++)s.push(Se(r[c],{modifiers:Mn,structs:t,type:"function"}));const o=[];if(n.returns){const c=ee(n.returns),a=c.length;for(let u=0;u<a;u++)o.push(Se(c[u],{modifiers:Mn,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function i0(e,t={}){const n=Ca(e);if(!n)throw new it({signature:e,type:"event"});const r=ee(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Se(r[o],{modifiers:ja,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function o0(e,t={}){const n=ka(e);if(!n)throw new it({signature:e,type:"error"});const r=ee(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Se(r[o],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function a0(e,t={}){const n=_a(e);if(!n)throw new it({signature:e,type:"constructor"});const r=ee(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Se(r[o],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function c0(e){const t=Ga(e);if(!t)throw new it({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const u0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,f0=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,d0=/^u?int$/;function Se(e,t){var d,l;const n=r0(e,t==null?void 0:t.type,t==null?void 0:t.structs);if(gn.has(n))return gn.get(n);const r=Ks.test(e),s=Re(r?f0:u0,e);if(!s)throw new Wa({param:e});if(s.name&&b0(s.name))throw new Ka({param:e,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},c=(t==null?void 0:t.structs)??{};let a,u={};if(r){a="tuple";const b=ee(s.type),p=[],h=b.length;for(let g=0;g<h;g++)p.push(Se(b[g],{structs:c}));u={components:p}}else if(s.type in c)a="tuple",u={components:c[s.type]};else if(d0.test(s.type))a=`${s.type}256`;else if(s.type==="address payable")a="address";else if(a=s.type,(t==null?void 0:t.type)!=="struct"&&!bi(a))throw new qa({type:a});if(s.modifier){if(!((l=(d=t==null?void 0:t.modifiers)==null?void 0:d.has)!=null&&l.call(d,s.modifier)))throw new Ya({param:e,type:t==null?void 0:t.type,modifier:s.modifier});if(Mn.has(s.modifier)&&!h0(a,!!s.array))throw new Ja({param:e,type:t==null?void 0:t.type,modifier:s.modifier})}const f={type:`${a}${s.array??""}`,...i,...o,...u};return gn.set(n,f),f}function ee(e,t=[],n="",r=0){const s=e.trim().length;for(let i=0;i<s;i++){const o=e[i],c=e.slice(i+1);switch(o){case",":return r===0?ee(c,[...t,n.trim()]):ee(c,t,`${n}${o}`,r);case"(":return ee(c,t,`${n}${o}`,r+1);case")":return ee(c,t,`${n}${o}`,r-1);default:return ee(c,t,`${n}${o}`,r)}}if(n==="")return t;if(r!==0)throw new n0({current:n,depth:r});return t.push(n.trim()),t}function bi(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Zs.test(e)||Ws.test(e)}const l0=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function b0(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Zs.test(e)||Ws.test(e)||l0.test(e)}function h0(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function cr(e){const t={},n=e.length;for(let o=0;o<n;o++){const c=e[o];if(!Zt(c))continue;const a=Oa(c);if(!a)throw new it({signature:c,type:"struct"});const u=a.properties.split(";"),f=[],d=u.length;for(let l=0;l<d;l++){const p=u[l].trim();if(!p)continue;const h=Se(p,{type:"struct"});f.push(h)}if(!f.length)throw new e0({signature:c});t[a.name]=f}const r={},s=Object.entries(t),i=s.length;for(let o=0;o<i;o++){const[c,a]=s[o];r[c]=hi(a,t)}return r}const p0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function hi(e=[],t={},n=new Set){const r=[],s=e.length;for(let i=0;i<s;i++){const o=e[i];if(Ks.test(o.type))r.push(o);else{const a=Re(p0,o.type);if(!(a!=null&&a.type))throw new Xa({abiParameter:o});const{array:u,type:f}=a;if(f in t){if(n.has(f))throw new t0({type:f});r.push({...o,type:`tuple${u??""}`,components:hi(t[f],t,new Set([...n,f]))})}else if(bi(f))r.push(o);else throw new Va({type:f})}}return r}function pi(e){const t=cr(e),n=[],r=e.length;for(let s=0;s<r;s++){const i=e[s];Zt(i)||n.push(Gn(i,t))}return n}function us(e){let t;if(typeof e=="string")t=Gn(e);else{const n=cr(e),r=e.length;for(let s=0;s<r;s++){const i=e[s];if(!Zt(i)){t=Gn(i,n);break}}}if(!t)throw new Da({signature:e});return t}function fs(e){const t=[];if(typeof e=="string"){const n=ee(e),r=n.length;for(let s=0;s<r;s++)t.push(Se(n[s],{modifiers:cs}))}else{const n=cr(e),r=e.length;for(let s=0;s<r;s++){const i=e[s];if(Zt(i))continue;const o=ee(i),c=o.length;for(let a=0;a<c;a++)t.push(Se(o[a],{modifiers:cs,structs:n}))}}if(t.length===0)throw new Za({params:e});return t}function L(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:i=>t(e,i)}class m0 extends _{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const ds="/docs/contract/encodeEventTopics";function Et(e){var a;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=st({abi:t,name:n});if(!u)throw new ss(n,{docsPath:ds});s=u}if(s.type!=="event")throw new ss(void 0,{docsPath:ds});const i=qe(s),o=ir(i);let c=[];if(r&&"inputs"in s){const u=(a=s.inputs)==null?void 0:a.filter(d=>"indexed"in d&&d.indexed),f=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(d=>r[d.name]))??[]:[];f.length>0&&(c=(u==null?void 0:u.map((d,l)=>Array.isArray(f[l])?f[l].map((b,p)=>ls({param:d,value:f[l][p]})):typeof f[l]<"u"&&f[l]!==null?ls({param:d,value:f[l]}):null))??[])}return[o,...c]}function ls({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return Ue(Vt(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new m0(e.type);return vt([e],[t])}function Wt(e,{method:t}){var r,s;const n={};return e.transport.type==="fallback"&&((s=(r=e.transport).onResponse)==null||s.call(r,({method:i,response:o,status:c,transport:a})=>{c==="success"&&t===i&&(n[o]=a.request)})),(i=>n[i]||e.request)}async function mi(e,t){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:c,toBlock:a}=t,u=Wt(e,{method:"eth_newFilter"}),f=i?Et({abi:r,args:s,eventName:i}):void 0,d=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?N(o):o,toBlock:typeof a=="bigint"?N(a):a,topics:f}]});return{abi:r,args:s,eventName:i,id:d,request:u(d),strict:!!c,type:"event"}}function te(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const y0={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},yi={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},g0={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let bs=class extends _{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},gi=class extends _{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},w0=class extends _{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}};const x0={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new w0({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new gi({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new bs({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new bs({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function ur(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(x0);return n.bytes=e,n.dataView=new DataView(e.buffer??e,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function v0(e,t={}){typeof t.size<"u"&&qt(e,{size:t.size});const n=q(e,t);return ce(n,t)}function P0(e,t={}){let n=e;if(typeof t.size<"u"&&(qt(n,{size:t.size}),n=Ae(n)),n.length>1||n[0]>1)throw new Wo(n);return!!n[0]}function Be(e,t={}){typeof t.size<"u"&&qt(e,{size:t.size});const n=q(e,t);return ie(n,t)}function E0(e,t={}){let n=e;return typeof t.size<"u"&&(qt(n,{size:t.size}),n=Ae(n,{dir:"right"})),new TextDecoder().decode(n)}function Bt(e,t){const n=typeof t=="string"?$e(t):t,r=ur(n);if(ze(n)===0&&e.length>0)throw new Pt;if(ze(t)&&ze(t)<32)throw new Ys({data:typeof t=="string"?t:q(t),params:e,size:ze(t)});let s=0;const i=[];for(let o=0;o<e.length;++o){const c=e[o];r.setPosition(s);const[a,u]=Qe(r,c,{staticPosition:0});s+=u,i.push(a)}return i}function Qe(e,t,{staticPosition:n}){const r=Js(t.type);if(r){const[s,i]=r;return I0(e,{...t,type:i},{length:s,staticPosition:n})}if(t.type==="tuple")return T0(e,t,{staticPosition:n});if(t.type==="address")return B0(e);if(t.type==="bool")return A0(e);if(t.type.startsWith("bytes"))return $0(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return S0(e,t);if(t.type==="string")return N0(e,{staticPosition:n});throw new oa(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const hs=32,Un=32;function B0(e){const t=e.readBytes(32);return[Xs(q(aa(t,-20))),32]}function I0(e,t,{length:n,staticPosition:r}){if(!n){const o=Be(e.readBytes(Un)),c=r+o,a=c+hs;e.setPosition(c);const u=Be(e.readBytes(hs)),f=mt(t);let d=0;const l=[];for(let b=0;b<u;++b){e.setPosition(a+(f?b*32:d));const[p,h]=Qe(e,t,{staticPosition:a});d+=h,l.push(p)}return e.setPosition(r+32),[l,32]}if(mt(t)){const o=Be(e.readBytes(Un)),c=r+o,a=[];for(let u=0;u<n;++u){e.setPosition(c+u*32);const[f]=Qe(e,t,{staticPosition:c});a.push(f)}return e.setPosition(r+32),[a,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[c,a]=Qe(e,t,{staticPosition:r+s});s+=a,i.push(c)}return[i,s]}function A0(e){return[P0(e.readBytes(32),{size:32}),32]}function $0(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const o=Be(e.readBytes(32));e.setPosition(n+o);const c=Be(e.readBytes(32));if(c===0)return e.setPosition(n+32),["0x",32];const a=e.readBytes(c);return e.setPosition(n+32),[q(a),32]}return[q(e.readBytes(Number.parseInt(s,10),32)),32]}function S0(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?v0(s,{signed:n}):Be(s,{signed:n}),32]}function T0(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(mt(t)){const o=Be(e.readBytes(Un)),c=n+o;for(let a=0;a<t.components.length;++a){const u=t.components[a];e.setPosition(c+i);const[f,d]=Qe(e,u,{staticPosition:c});i+=d,s[r?a:u==null?void 0:u.name]=f}return e.setPosition(n+32),[s,32]}for(let o=0;o<t.components.length;++o){const c=t.components[o],[a,u]=Qe(e,c,{staticPosition:n});s[r?o:c==null?void 0:c.name]=a,i+=u}return[s,i]}function N0(e,{staticPosition:t}){const n=Be(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Be(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),o=E0(Ae(i));return e.setPosition(t+32),[o,32]}function mt(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(mt);const n=Js(e.type);return!!(n&&mt({...e,type:n[1]}))}function k0(e){const{abi:t,data:n}=e,r=pt(n,0,4);if(r==="0x")throw new Pt;const i=[...t||[],yi,g0].find(o=>o.type==="error"&&r===or(qe(o)));if(!i)throw new Qs(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Bt(i.inputs,pt(n,4)):void 0,errorName:i.name}}function wi({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof t[i]=="object"?we(t[i]):t[i]}`).join(", ")})`}function fr(e,t="wei"){return Ko(e,Yo[t])}class F0 extends _{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class C0 extends _{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function ps(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function z0(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=ps(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=ps(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function It(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class R0 extends _{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class O0 extends _{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",It(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class L0 extends _{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class _0 extends _{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){var p;const b=It({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof l<"u"&&`${fr(l)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof c<"u"&&`${ye(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${ye(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ye(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",b].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class xi extends _{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),t&&i!==void 0&&(o=`Transaction at block hash "${t}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class vi extends _{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class M0 extends _{constructor({receipt:t}){super(`Transaction with hash "${t.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=t}}class G0 extends _{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}class Pi extends _{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l,stateOverride:b}){var g;const p=n?te(n):void 0;let h=It({from:p==null?void 0:p.address,to:d,value:typeof l<"u"&&`${fr(l)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof c<"u"&&`${ye(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${ye(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ye(u)} gwei`,nonce:f});b&&(h+=`
${z0(b)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",h].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Ei extends _{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:c}){const a=st({abi:n,args:r,name:o}),u=a?wi({abiItem:a,args:r,includeFunctionName:!1,includeName:!1}):void 0,f=a?qe(a,{includeName:!0}):void 0,d=It({address:s&&Jo(s),function:f,args:u&&u!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${u}`,sender:c});super(t.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=o,this.sender=c}}class Hn extends _{constructor({abi:t,data:n,functionName:r,message:s}){let i,o,c,a;if(n&&n!=="0x")try{o=k0({abi:t,data:n});const{abiItem:f,errorName:d,args:l}=o;if(d==="Error")a=l[0];else if(d==="Panic"){const[b]=l;a=y0[b]}else{const b=f?qe(f,{includeName:!0}):void 0,p=f&&l?wi({abiItem:f,args:l,includeFunctionName:!1,includeName:!1}):void 0;c=[b?`Error: ${b}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(f){i=f}else s&&(a=s);let u;i instanceof Qs&&(u=i.signature,c=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(a&&a!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,a||u].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:c,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=a,this.signature=u}}class U0 extends _{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class H0 extends _{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Kt extends _{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}const j0=3;function rt(e,{abi:t,address:n,args:r,docsPath:s,functionName:i,sender:o}){const c=e instanceof Kt?e:e instanceof _?e.walk(p=>"data"in p)||e.walk():{},{code:a,data:u,details:f,message:d,shortMessage:l}=c,b=e instanceof Pt?new U0({functionName:i}):[j0,Xo.code].includes(a)&&(u||f||d||l)||a===sr.code&&f==="execution reverted"&&u?new Hn({abi:t,data:typeof u=="object"?u.data:u,functionName:i,message:c instanceof Qo?f:l??d}):e;return new Ei(b,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function D0(e){const t=Ue(`0x${e.substring(4)}`).substring(26);return Xs(`0x${t}`)}async function V0({hash:e,signature:t}){const n=ht(e)?e:Ge(e),{secp256k1:r}=await Hs(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>bd);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:f,v:d,yParity:l}=t,b=Number(l??d),p=ms(b);return new r.Signature(ce(u),ce(f)).addRecoveryBit(p)}const o=ht(t)?t:Ge(t);if(ze(o)!==65)throw new Error("invalid signature length");const c=ie(`0x${o.slice(130)}`),a=ms(c);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(a)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function ms(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Bi({hash:e,signature:t}){return D0(await V0({hash:e,signature:t}))}function He(e,t="hex"){const n=Ii(e),r=ur(new Uint8Array(n.length));return n.encode(r),t==="hex"?q(r.bytes):r.bytes}function Ii(e){return Array.isArray(e)?q0(e.map(t=>Ii(t))):Z0(e)}function q0(e){const t=e.reduce((s,i)=>s+i.length,0),n=Ai(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:i}of e)i(s)}}}function Z0(e){const t=typeof e=="string"?$e(e):e,n=Ai(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function Ai(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new _("Length is too large.")}function W0(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,i=Ue(be(["0x05",He([t?N(t):"0x",s,n?N(n):"0x"])]));return r==="bytes"?$e(i):i}async function $i(e){const{authorization:t,signature:n}=e;return Bi({hash:W0(t),signature:n??t})}class K0 extends _{constructor(t,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:c,maxFeePerGas:a,maxPriorityFeePerGas:u,nonce:f,to:d,value:l}){var p;const b=It({from:n==null?void 0:n.address,to:d,value:typeof l<"u"&&`${fr(l)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof c<"u"&&`${ye(c)} gwei`,maxFeePerGas:typeof a<"u"&&`${ye(a)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${ye(u)} gwei`,nonce:f});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",b].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function Yt(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof _?e.walk(s=>(s==null?void 0:s.code)===Ft.code):e;return r instanceof _?new Ft({cause:e,message:r.details}):Ft.nodeMessage.test(n)?new Ft({cause:e,message:e.details}):nt.nodeMessage.test(n)?new nt({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Vr.nodeMessage.test(n)?new Vr({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):qr.nodeMessage.test(n)?new qr({cause:e,nonce:t==null?void 0:t.nonce}):Zr.nodeMessage.test(n)?new Zr({cause:e,nonce:t==null?void 0:t.nonce}):Wr.nodeMessage.test(n)?new Wr({cause:e,nonce:t==null?void 0:t.nonce}):Kr.nodeMessage.test(n)?new Kr({cause:e}):Yr.nodeMessage.test(n)?new Yr({cause:e,gas:t==null?void 0:t.gas}):Jr.nodeMessage.test(n)?new Jr({cause:e,gas:t==null?void 0:t.gas}):Xr.nodeMessage.test(n)?new Xr({cause:e}):Rt.nodeMessage.test(n)?new Rt({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new xt({cause:e})}function Y0(e,{docsPath:t,...n}){const r=(()=>{const s=Yt(e,n);return s instanceof xt?e:s})();return new K0(r,{docsPath:t,...n})}function Jt(e,{format:t}){if(!t)return{};const n={};function r(i){const o=Object.keys(i);for(const c of o)c in e&&(n[c]=e[c]),i[c]&&typeof i[c]=="object"&&!Array.isArray(i[c])&&r(i[c])}const s=t(e||{});return r(s),n}function dr(e,t){return({exclude:n,format:r})=>({exclude:n,format:(s,i)=>{const o=t(s,i);if(n)for(const c of n)delete o[c];return{...o,...r(s,i)}},type:e})}const J0={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function At(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=X0(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>q(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=N(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=N(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=N(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=N(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=N(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=N(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=J0[e.type]),typeof e.value<"u"&&(n.value=N(e.value)),n}function X0(e){return e.map(t=>({address:t.address,r:t.r?N(BigInt(t.r)):t.r,s:t.s?N(BigInt(t.s)):t.s,chainId:N(t.chainId),nonce:N(t.nonce),...typeof t.yParity<"u"?{yParity:N(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:N(t.v)}:{}}))}function ys(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Qr({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Qr({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Q0(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:i}=e,o={};if(i!==void 0&&(o.code=i),t!==void 0&&(o.balance=N(t)),n!==void 0&&(o.nonce=N(n)),r!==void 0&&(o.state=ys(r)),s!==void 0){if(o.state)throw new C0;o.stateDiff=ys(s)}return o}function lr(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!oe(n,{strict:!1}))throw new ue({address:n});if(t[n])throw new F0({address:n});t[n]=Q0(r)}return t}const Xt=2n**256n-1n;function ot(e){const{account:t,maxFeePerGas:n,maxPriorityFeePerGas:r,to:s}=e,i=t?te(t):void 0;if(i&&!oe(i.address))throw new ue({address:i.address});if(s&&!oe(s))throw new ue({address:s});if(n&&n>Xt)throw new nt({maxFeePerGas:n});if(r&&n&&r>n)throw new Rt({maxFeePerGas:n,maxPriorityFeePerGas:r})}class Si extends _{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class br extends _{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class ec extends _{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${ye(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Ti extends _{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Ni={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Qt(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?ie(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?ie(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Ni[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=tc(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const gl=dr("transaction",Qt);function tc(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function hr(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:Qt(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const wl=dr("block",hr);async function ae(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){var u,f,d;const i=s??!1,o=n!==void 0?N(n):void 0;let c=null;if(t?c=await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):c=await e.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!c)throw new Ti({blockHash:t,blockNumber:n});return(((d=(f=(u=e.chain)==null?void 0:u.formatters)==null?void 0:f.block)==null?void 0:d.format)||hr)(c,"getBlock")}async function pr(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function nc(e,t){return ki(e,t)}async function ki(e,t){var i,o;const{block:n,chain:r=e.chain,request:s}=t||{};try{const c=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof c=="function"){const u=n||await L(e,ae,"getBlock")({}),f=await c({block:u,client:e,request:s});if(f===null)throw new Error;return f}if(typeof c<"u")return c;const a=await e.request({method:"eth_maxPriorityFeePerGas"});return ce(a)}catch{const[c,a]=await Promise.all([n?Promise.resolve(n):L(e,ae,"getBlock")({}),L(e,pr,"getGasPrice")({})]);if(typeof c.baseFeePerGas!="bigint")throw new br;const u=a-c.baseFeePerGas;return u<0n?0n:u}}async function rc(e,t){return jn(e,t)}async function jn(e,t){var l,b;const{block:n,chain:r=e.chain,request:s,type:i="eip1559"}=t||{},o=await(async()=>{var p,h;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):((h=r==null?void 0:r.fees)==null?void 0:h.baseFeeMultiplier)??1.2})();if(o<1)throw new Si;const a=10**(((l=o.toString().split(".")[1])==null?void 0:l.length)??0),u=p=>p*BigInt(Math.ceil(o*a))/BigInt(a),f=n||await L(e,ae,"getBlock")({});if(typeof((b=r==null?void 0:r.fees)==null?void 0:b.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof f.baseFeePerGas!="bigint")throw new br;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await ki(e,{block:f,chain:r,request:s}),h=u(f.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??h+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??u(await L(e,pr,"getGasPrice")({}))}}async function Fi(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?N(r):n]},{dedupe:!!r});return ie(s)}function mr(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>$e(i)):e.blobs,s=[];for(const i of r)s.push(Uint8Array.from(t.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>q(i))}function yr(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>$e(o)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(o=>$e(o)):e.commitments,i=[];for(let o=0;o<r.length;o++){const c=r[o],a=s[o];i.push(Uint8Array.from(t.computeBlobKzgProof(c,a)))}return n==="bytes"?i:i.map(o=>q(o))}function sc(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),c=Number(n&i),a=r?4:0,u=r?0:4;e.setUint32(t+a,o,r),e.setUint32(t+u,c,r)}function ic(e,t,n){return e&t^~e&n}function oc(e,t,n){return e&t^e&n^t&n}class ac extends ei{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=yn(this.buffer)}update(t){Lt(this),t=ti(t),ni(t);const{view:n,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const a=yn(t);for(;s<=i-o;o+=s)this.process(a,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Lt(this),ca(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,_t(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;sc(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=yn(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=a/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<u;d++)c.setUint32(4*d,f[d],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Fe=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ce=new Uint32Array(64);class uc extends ac{constructor(t=32){super(64,t,8,!1),this.A=Fe[0]|0,this.B=Fe[1]|0,this.C=Fe[2]|0,this.D=Fe[3]|0,this.E=Fe[4]|0,this.F=Fe[5]|0,this.G=Fe[6]|0,this.H=Fe[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:o,G:c,H:a}=this;return[t,n,r,s,i,o,c,a]}set(t,n,r,s,i,o,c,a){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=a|0}process(t,n){for(let d=0;d<16;d++,n+=4)Ce[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const l=Ce[d-15],b=Ce[d-2],p=pe(l,7)^pe(l,18)^l>>>3,h=pe(b,17)^pe(b,19)^b>>>10;Ce[d]=h+Ce[d-7]+p+Ce[d-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:a,G:u,H:f}=this;for(let d=0;d<64;d++){const l=pe(c,6)^pe(c,11)^pe(c,25),b=f+l+ic(c,a,u)+cc[d]+Ce[d]|0,h=(pe(r,2)^pe(r,13)^pe(r,22))+oc(r,s,i)|0;f=u,u=a,a=c,c=o+b|0,o=i,i=s,s=r,r=b+h|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(r,s,i,o,c,a,u,f)}roundClean(){_t(Ce)}destroy(){this.set(0,0,0,0,0,0,0,0),_t(this.buffer)}}const Ci=ua(()=>new uc),fc=Ci;function dc(e,t){return fc(ht(e,{strict:!1})?Vt(e):e)}function lc(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=dc(t);return s.set([n],0),r==="bytes"?s:q(s)}function zi(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const i of t)s.push(lc({commitment:i,to:r,version:n}));return s}const gs=6,Ri=32,gr=4096,Oi=Ri*gr,ws=Oi*gs-1-1*gr*gs,Li=1;class bc extends _{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class _i extends _{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class hc extends _{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class pc extends _{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${Li}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function mc(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?$e(e.data):e.data,r=ze(n);if(!r)throw new _i;if(r>ws)throw new bc({maxSize:ws,size:r});const s=[];let i=!0,o=0;for(;i;){const c=ur(new Uint8Array(Oi));let a=0;for(;a<gr;){const u=n.slice(o,o+(Ri-1));if(c.pushByte(0),c.pushBytes(u),u.length<31){c.pushByte(128),i=!1;break}a++,o+=31}s.push(c)}return t==="bytes"?s.map(c=>c.bytes):s.map(c=>q(c.bytes))}function Mi(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??mc({data:t,to:r}),i=e.commitments??mr({blobs:s,kzg:n,to:r}),o=e.proofs??yr({blobs:s,commitments:i,kzg:n,to:r}),c=[];for(let a=0;a<s.length;a++)c.push({blob:s[a],commitment:i[a],proof:o[a]});return c}function Gi(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new O0({transaction:e})}function yc(e,{docsPath:t,...n}){const r=(()=>{const s=Yt(e,n);return s instanceof xt?e:s})();return new _0(r,{docsPath:t,...n})}async function wr(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return ie(t)}async function Ui(e,t){var E,T,R,S,F;const{account:n=e.account,accessList:r,authorizationList:s,chain:i=e.chain,blobVersionedHashes:o,blobs:c,data:a,gas:u,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:p,nonceManager:h,to:g,type:v,value:B,...y}=t,m=await(async()=>{if(!n||!h||typeof p<"u")return p;const k=te(n),U=i?i.id:await L(e,wr,"getChainId")({});return await h.consume({address:k.address,chainId:U,client:e})})();ot(t);const x=(T=(E=i==null?void 0:i.formatters)==null?void 0:E.transactionRequest)==null?void 0:T.format,P=(x||At)({...Jt(y,{format:x}),account:n?te(n):void 0,accessList:r,authorizationList:s,blobs:c,blobVersionedHashes:o,data:a,gas:u,gasPrice:f,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:b,nonce:m,to:g,type:v,value:B},"fillTransaction");try{const k=await e.request({method:"eth_fillTransaction",params:[P]}),w=(((S=(R=i==null?void 0:i.formatters)==null?void 0:R.transaction)==null?void 0:S.format)||Qt)(k.tx);delete w.blockHash,delete w.blockNumber,delete w.r,delete w.s,delete w.transactionIndex,delete w.v,delete w.yParity,w.data=w.input,w.gas&&(w.gas=t.gas??w.gas),w.gasPrice&&(w.gasPrice=t.gasPrice??w.gasPrice),w.maxFeePerBlobGas&&(w.maxFeePerBlobGas=t.maxFeePerBlobGas??w.maxFeePerBlobGas),w.maxFeePerGas&&(w.maxFeePerGas=t.maxFeePerGas??w.maxFeePerGas),w.maxPriorityFeePerGas&&(w.maxPriorityFeePerGas=t.maxPriorityFeePerGas??w.maxPriorityFeePerGas),w.nonce&&(w.nonce=t.nonce??w.nonce);const $=await(async()=>{var O,G;if(typeof((O=i==null?void 0:i.fees)==null?void 0:O.baseFeeMultiplier)=="function"){const H=await L(e,ae,"getBlock")({});return i.fees.baseFeeMultiplier({block:H,client:e,request:t})}return((G=i==null?void 0:i.fees)==null?void 0:G.baseFeeMultiplier)??1.2})();if($<1)throw new Si;const A=10**(((F=$.toString().split(".")[1])==null?void 0:F.length)??0),C=O=>O*BigInt(Math.ceil($*A))/BigInt(A);return w.maxFeePerGas&&!t.maxFeePerGas&&(w.maxFeePerGas=C(w.maxFeePerGas)),w.gasPrice&&!t.gasPrice&&(w.gasPrice=C(w.gasPrice)),{raw:k.raw,transaction:{from:P.from,...w}}}catch(k){throw yc(k,{...t,chain:e.chain})}}const gc=["blobVersionedHashes","chainId","fees","gas","nonce","type"],xs=new Map,wn=new js(128);async function Hi(e,t){var m,x,I;let n=t;n.account??(n.account=e.account),n.parameters??(n.parameters=gc);const{account:r,chain:s=e.chain,nonceManager:i,parameters:o}=n,c=(()=>{if(typeof(s==null?void 0:s.prepareTransactionRequest)=="function")return{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(s==null?void 0:s.prepareTransactionRequest))return{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}})();let a;async function u(){return a||(typeof n.chainId<"u"?n.chainId:s?s.id:(a=await L(e,wr,"getChainId")({}),a))}const f=r&&te(r);let d=n.nonce;if(o.includes("nonce")&&typeof d>"u"&&f&&i){const P=await u();d=await i.consume({address:f.address,chainId:P,client:e})}c!=null&&c.fn&&((m=c.runAt)!=null&&m.includes("beforeFillTransaction"))&&(n=await c.fn({...n,chain:s},{phase:"beforeFillTransaction"}),d??(d=n.nonce));const b=((o.includes("blobVersionedHashes")||o.includes("sidecars"))&&n.kzg&&n.blobs||wn.get(e.uid)===!1||!["fees","gas"].some(E=>o.includes(E))?!1:!!(o.includes("chainId")&&typeof n.chainId!="number"||o.includes("nonce")&&typeof d!="number"||o.includes("fees")&&typeof n.gasPrice!="bigint"&&(typeof n.maxFeePerGas!="bigint"||typeof n.maxPriorityFeePerGas!="bigint")||o.includes("gas")&&typeof n.gas!="bigint"))?await L(e,Ui,"fillTransaction")({...n,nonce:d}).then(P=>{const{chainId:E,from:T,gas:R,gasPrice:S,nonce:F,maxFeePerBlobGas:k,maxFeePerGas:U,maxPriorityFeePerGas:w,type:$,...z}=P.transaction;return wn.set(e.uid,!0),{...n,...T?{from:T}:{},...$?{type:$}:{},...typeof E<"u"?{chainId:E}:{},...typeof R<"u"?{gas:R}:{},...typeof S<"u"?{gasPrice:S}:{},...typeof F<"u"?{nonce:F}:{},...typeof k<"u"?{maxFeePerBlobGas:k}:{},...typeof U<"u"?{maxFeePerGas:U}:{},...typeof w<"u"?{maxPriorityFeePerGas:w}:{},..."nonceKey"in z&&typeof z.nonceKey<"u"?{nonceKey:z.nonceKey}:{}}}).catch(P=>{var R;const E=P;return E.name!=="TransactionExecutionError"||((R=E.walk)==null?void 0:R.call(E,S=>{const F=S;return F.name==="MethodNotFoundRpcError"||F.name==="MethodNotSupportedRpcError"}))&&wn.set(e.uid,!1),n}):n;d??(d=b.nonce),n={...b,...f?{from:f==null?void 0:f.address}:{},...d?{nonce:d}:{}};const{blobs:p,gas:h,kzg:g,type:v}=n;c!=null&&c.fn&&((x=c.runAt)!=null&&x.includes("beforeFillParameters"))&&(n=await c.fn({...n,chain:s},{phase:"beforeFillParameters"}));let B;async function y(){return B||(B=await L(e,ae,"getBlock")({blockTag:"latest"}),B)}if(o.includes("nonce")&&typeof d>"u"&&f&&!i&&(n.nonce=await L(e,Fi,"getTransactionCount")({address:f.address,blockTag:"pending"})),(o.includes("blobVersionedHashes")||o.includes("sidecars"))&&p&&g){const P=mr({blobs:p,kzg:g});if(o.includes("blobVersionedHashes")){const E=zi({commitments:P,to:"hex"});n.blobVersionedHashes=E}if(o.includes("sidecars")){const E=yr({blobs:p,commitments:P,kzg:g}),T=Mi({blobs:p,commitments:P,proofs:E,to:"hex"});n.sidecars=T}}if(o.includes("chainId")&&(n.chainId=await u()),(o.includes("fees")||o.includes("type"))&&typeof v>"u")try{n.type=Gi(n)}catch{let P=xs.get(e.uid);if(typeof P>"u"){const E=await y();P=typeof(E==null?void 0:E.baseFeePerGas)=="bigint",xs.set(e.uid,P)}n.type=P?"eip1559":"legacy"}if(o.includes("fees"))if(n.type!=="legacy"&&n.type!=="eip2930"){if(typeof n.maxFeePerGas>"u"||typeof n.maxPriorityFeePerGas>"u"){const P=await y(),{maxFeePerGas:E,maxPriorityFeePerGas:T}=await jn(e,{block:P,chain:s,request:n});if(typeof n.maxPriorityFeePerGas>"u"&&n.maxFeePerGas&&n.maxFeePerGas<T)throw new ec({maxPriorityFeePerGas:T});n.maxPriorityFeePerGas=T,n.maxFeePerGas=E}}else{if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")throw new br;if(typeof n.gasPrice>"u"){const P=await y(),{gasPrice:E}=await jn(e,{block:P,chain:s,request:n,type:"legacy"});n.gasPrice=E}}return o.includes("gas")&&typeof h>"u"&&(n.gas=await L(e,xr,"estimateGas")({...n,account:f,prepare:(f==null?void 0:f.type)==="local"?[]:["blobVersionedHashes"]})),c!=null&&c.fn&&((I=c.runAt)!=null&&I.includes("afterFillParameters"))&&(n=await c.fn({...n,chain:s},{phase:"afterFillParameters"})),ot(n),delete n.parameters,n}async function xr(e,t){var o,c,a;const{account:n=e.account,prepare:r=!0}=t,s=n?te(n):void 0,i=(()=>{if(Array.isArray(r))return r;if((s==null?void 0:s.type)!=="local")return["blobVersionedHashes"]})();try{const u=await(async()=>{if(t.to)return t.to;if(t.authorizationList&&t.authorizationList.length>0)return await $i({authorization:t.authorizationList[0]}).catch(()=>{throw new _("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:f,authorizationList:d,blobs:l,blobVersionedHashes:b,blockNumber:p,blockTag:h,data:g,gas:v,gasPrice:B,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:x,nonce:I,value:P,stateOverride:E,...T}=r?await Hi(e,{...t,parameters:i,to:u}):t;if(v&&t.gas!==v)return v;const S=(typeof p=="bigint"?N(p):void 0)||h,F=lr(E);ot(t);const k=(a=(c=(o=e.chain)==null?void 0:o.formatters)==null?void 0:c.transactionRequest)==null?void 0:a.format,w=(k||At)({...Jt(T,{format:k}),account:s,accessList:f,authorizationList:d,blobs:l,blobVersionedHashes:b,data:g,gasPrice:B,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:x,nonce:I,to:u,value:P},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:F?[w,S??e.experimental_blockTag??"latest",F]:S?[w,S]:[w]}))}catch(u){throw Y0(u,{...t,account:s,chain:e.chain})}}async function wc(e,t){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...c}=t,a=he({abi:n,args:s,functionName:i});try{return await L(e,xr,"estimateGas")({data:`${a}${o?o.replace("0x",""):""}`,to:r,...c})}catch(u){const f=c.account?te(c.account):void 0;throw rt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:f==null?void 0:f.address})}}function en(e,t){if(!oe(e,{strict:!1}))throw new ue({address:e});if(!oe(t,{strict:!1}))throw new ue({address:t});return e.toLowerCase()===t.toLowerCase()}const vs="/docs/contract/decodeEventLog";function Ut(e){const{abi:t,data:n,strict:r,topics:s}=e,i=r??!0,[o,...c]=s;if(!o)throw new fa({docsPath:vs});const a=t.find(h=>h.type==="event"&&o===ir(qe(h)));if(!(a&&"name"in a)||a.type!=="event")throw new da(o,{docsPath:vs});const{name:u,inputs:f}=a,d=f==null?void 0:f.some(h=>!("name"in h&&h.name)),l=d?[]:{},b=f.map((h,g)=>[h,g]).filter(([h])=>"indexed"in h&&h.indexed);for(let h=0;h<b.length;h++){const[g,v]=b[h],B=c[h];if(!B)throw new ar({abiItem:a,param:g});l[d?v:g.name||v]=xc({param:g,value:B})}const p=f.filter(h=>!("indexed"in h&&h.indexed));if(p.length>0){if(n&&n!=="0x")try{const h=Bt(p,n);if(h)if(d)for(let g=0;g<f.length;g++)l[g]=l[g]??h.shift();else for(let g=0;g<p.length;g++)l[p[g].name]=h[g]}catch(h){if(i)throw h instanceof Ys||h instanceof gi?new Mt({abiItem:a,data:n,params:p,size:ze(n)}):h}else if(i)throw new Mt({abiItem:a,data:"0x",params:p,size:0})}return{eventName:u,args:Object.values(l).length>0?l:void 0}}function xc({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(Bt([e],t)||[])[0]}function vr(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(o=>{var f;const c=t.filter(d=>d.type==="event"&&o.topics[0]===ir(d));if(c.length===0)return null;let a,u;for(const d of c)try{a=Ut({...o,abi:[d],strict:!0}),u=d;break}catch{}if(!a&&!s){u=c[0];try{a=Ut({...o,abi:[u],strict:!1})}catch{const d=(f=u.inputs)==null?void 0:f.some(l=>!("name"in l&&l.name));return{...o,args:d?[]:{},eventName:u.name}}}return!a||!u||i&&!i.includes(a.eventName)||!vc({args:a.args,inputs:u.inputs,matchArgs:n})?null:{...a,...o}}).filter(Boolean)}function vc(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(i,o,c){try{return i.type==="address"?en(o,c):i.type==="string"||i.type==="bytes"?Ue(Vt(o))===c:o===c}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const c=n[o];return c?(Array.isArray(i)?i:[i]).some(u=>s(c,u,t[o])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const c=n.find(u=>u.name===i);return c?(Array.isArray(o)?o:[o]).some(u=>s(c,u,t[i])):!1}):!1}function Te(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,blockTimestamp:e.blockTimestamp?BigInt(e.blockTimestamp):e.blockTimestamp===null?null:void 0,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function Pr(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:c,strict:a}={}){const u=a??!1,f=o??(i?[i]:void 0);let d=[];f&&(d=[f.flatMap(h=>Et({abi:[h],eventName:h.name,args:o?void 0:c}))],i&&(d=d[0]));let l;n?l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,blockHash:n}]}):l=await e.request({method:"eth_getLogs",params:[{address:t,topics:d,fromBlock:typeof r=="bigint"?N(r):r,toBlock:typeof s=="bigint"?N(s):s}]});const b=l.map(p=>Te(p));return f?vr({abi:f,args:c,logs:b,strict:u}):b}async function ji(e,t){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:c,toBlock:a,strict:u}=t,f=o?st({abi:n,name:o}):void 0,d=f?void 0:n.filter(l=>l.type==="event");return L(e,Pr,"getLogs")({address:r,args:s,blockHash:i,event:f,events:d,fromBlock:c,toBlock:a,strict:u})}const xn="/docs/contract/decodeFunctionResult";function Ze(e){const{abi:t,args:n,functionName:r,data:s}=e;let i=t[0];if(r){const c=st({abi:t,args:n,name:r});if(!c)throw new Gt(r,{docsPath:xn});i=c}if(i.type!=="function")throw new Gt(void 0,{docsPath:xn});if(!i.outputs)throw new ri(i.name,{docsPath:xn});const o=Bt(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Er=BigInt(0),Dn=BigInt(1);function $t(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Br(e){if(!$t(e))throw new Error("Uint8Array expected")}function yt(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Ct(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Di(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Er:BigInt("0x"+e)}const Vi=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Pc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function gt(e){if(Br(e),Vi)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Pc[e[n]];return t}const xe={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ps(e){if(e>=xe._0&&e<=xe._9)return e-xe._0;if(e>=xe.A&&e<=xe.F)return e-(xe.A-10);if(e>=xe.a&&e<=xe.f)return e-(xe.a-10)}function Ht(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Vi)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Ps(e.charCodeAt(i)),c=Ps(e.charCodeAt(i+1));if(o===void 0||c===void 0){const a=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+i)}r[s]=o*16+c}return r}function Me(e){return Di(gt(e))}function qi(e){return Br(e),Di(gt(Uint8Array.from(e).reverse()))}function St(e,t){return Ht(e.toString(16).padStart(t*2,"0"))}function Zi(e,t){return St(e,t).reverse()}function se(e,t,n){let r;if(typeof t=="string")try{r=Ht(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if($t(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function jt(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Br(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const i=e[r];n.set(i,s),s+=i.length}return n}const vn=e=>typeof e=="bigint"&&Er<=e;function Ir(e,t,n){return vn(e)&&vn(t)&&vn(n)&&t<=e&&e<n}function et(e,t,n,r){if(!Ir(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Ec(e){let t;for(t=0;e>Er;e>>=Dn,t+=1);return t}const tn=e=>(Dn<<BigInt(e))-Dn,Pn=e=>new Uint8Array(e),Es=e=>Uint8Array.from(e);function Bc(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Pn(e),s=Pn(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},c=(...d)=>n(s,r,...d),a=(d=Pn(0))=>{s=c(Es([0]),d),r=c(),d.length!==0&&(s=c(Es([1]),d),r=c())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const l=[];for(;d<t;){r=c();const b=r.slice();l.push(b),d+=r.length}return jt(...l)};return(d,l)=>{o(),a(d);let b;for(;!(b=l(u()));)a();return o(),b}}const Ic={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||$t(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function nn(e,t,n={}){const r=(s,i,o)=>{const c=Ic[i];if(typeof c!="function")throw new Error("invalid validator function");const a=e[s];if(!(o&&a===void 0)&&!c(a,e))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+a)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}function Bs(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const i=e(n,...r);return t.set(n,i),i}}const Ac="0.1.1";function $c(){return Ac}class M extends Error{static setStaticOptions(t){M.prototype.docsOrigin=t.docsOrigin,M.prototype.showVersion=t.showVersion,M.prototype.version=t.version}constructor(t,n={}){const r=(()=>{var f;if(n.cause instanceof M){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(f=n.cause)!=null&&f.message?n.cause.message:n.details})(),s=n.cause instanceof M&&n.cause.docsPath||n.docsPath,i=n.docsOrigin??M.prototype.docsOrigin,o=`${i}${s??""}`,c=!!(n.version??M.prototype.showVersion),a=n.version??M.prototype.version,u=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s||c?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0,c?`Version: ${a}`:void 0]:[]].filter(f=>typeof f=="string").join(`
`);super(u,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsOrigin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.cause=n.cause,this.details=r,this.docs=o,this.docsOrigin=i,this.docsPath=s,this.shortMessage=t,this.showVersion=c,this.version=a}walk(t){return Wi(this,t)}}Object.defineProperty(M,"defaultStaticOptions",{enumerable:!0,configurable:!0,writable:!0,value:{docsOrigin:"https://oxlib.sh",showVersion:!1,version:`ox@${$c()}`}});M.setStaticOptions(M.defaultStaticOptions);function Wi(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Wi(e.cause,t):t?null:e}function Tt(e,t){if(Je(e)>t)throw new Dc({givenSize:Je(e),maxSize:t})}const ve={zero:48,nine:57,A:65,F:70,a:97,f:102};function Is(e){if(e>=ve.zero&&e<=ve.nine)return e-ve.zero;if(e>=ve.A&&e<=ve.F)return e-(ve.A-10);if(e>=ve.a&&e<=ve.f)return e-(ve.a-10)}function Sc(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new Vc({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=e[o?i:e.length-i-1]}return s}function Ki(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let i=0;i<r.length-1&&r[n==="left"?i:r.length-i-1].toString()==="0";i++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function rn(e,t){if(ne(e)>t)throw new Jc({givenSize:ne(e),maxSize:t})}function Tc(e,t){if(typeof t=="number"&&t>0&&t>ne(e)-1)throw new so({offset:t,position:"start",size:ne(e)})}function Nc(e,t,n){if(typeof t=="number"&&typeof n=="number"&&ne(e)!==n-t)throw new so({offset:n,position:"end",size:ne(e)})}function Yi(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new Xc({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const kc="#__bigint";function Ji(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+kc:s,n)}const Fc=new TextDecoder,Cc=new TextEncoder;function zc(e){return e instanceof Uint8Array?e:typeof e=="string"?Xi(e):Rc(e)}function Rc(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Xi(e,t={}){const{size:n}=t;let r=e;n&&(rn(e,n),r=De(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let c=0,a=0;c<i;c++){const u=Is(s.charCodeAt(a++)),f=Is(s.charCodeAt(a++));if(u===void 0||f===void 0)throw new M(`Invalid byte sequence ("${s[a-2]}${s[a-1]}" in "${s}").`);o[c]=u<<4|f}return o}function Oc(e,t={}){const{size:n}=t,r=Cc.encode(e);return typeof n=="number"?(Tt(r,n),Lc(r,n)):r}function Lc(e,t){return Sc(e,{dir:"right",size:t})}function Je(e){return e.length}function _c(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function Mc(e,t={}){const{size:n}=t;typeof n<"u"&&Tt(e,n);const r=de(e,t);return to(r,t)}function Gc(e,t={}){const{size:n}=t;let r=e;if(typeof n<"u"&&(Tt(r,n),r=Qi(r)),r.length>1||r[0]>1)throw new jc(r);return!!r[0]}function Ie(e,t={}){const{size:n}=t;typeof n<"u"&&Tt(e,n);const r=de(e,t);return no(r,t)}function Uc(e,t={}){const{size:n}=t;let r=e;return typeof n<"u"&&(Tt(r,n),r=Hc(r)),Fc.decode(r)}function Qi(e){return Ki(e,{dir:"left"})}function Hc(e){return Ki(e,{dir:"right"})}class jc extends M{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let Dc=class extends M{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Vc=class extends M{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const qc=new TextEncoder,Zc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Wc(e,t={}){const{strict:n=!1}=t;if(!e)throw new As(e);if(typeof e!="string")throw new As(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new $s(e);if(!e.startsWith("0x"))throw new $s(e)}function fe(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Kc(e){return e instanceof Uint8Array?de(e):Array.isArray(e)?de(new Uint8Array(e)):e}function eo(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(rn(n,t.size),je(n,t.size)):n}function de(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Zc[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(rn(r,t.size),De(r,t.size)):r}function K(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const u=typeof e=="bigint"?"n":"";throw new ro({max:i?`${i}${u}`:void 0,min:`${o}${u}`,signed:n,size:r,value:`${e}${u}`})}const a=`0x${(n&&s<0?BigInt.asUintN(r*8,BigInt(s)):s).toString(16)}`;return r?je(a,r):a}function Ar(e,t={}){return de(qc.encode(e),t)}function je(e,t){return Yi(e,{dir:"left",size:t})}function De(e,t){return Yi(e,{dir:"right",size:t})}function ge(e,t,n,r={}){const{strict:s}=r;Tc(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&Nc(i,t,n),i}function ne(e){return Math.ceil((e.length-2)/2)}function to(e,t={}){const{signed:n}=t;t.size&&rn(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,i=(1n<<BigInt(s)*8n)-1n,o=i>>1n;return r<=o?r:r-i-1n}function no(e,t={}){const{signed:n,size:r}=t;return Number(!n&&!r?e:to(e,t))}function Yc(e,t={}){const{strict:n=!1}=t;try{return Wc(e,{strict:n}),!0}catch{return!1}}class ro extends M{constructor({max:t,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class As extends M{constructor(t){super(`Value \`${typeof t=="object"?Ji(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class $s extends M{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Jc extends M{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class so extends M{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Xc extends M{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Qc(e){return{address:e.address,amount:K(e.amount),index:K(e.index),validatorIndex:K(e.validatorIndex)}}function io(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:K(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:K(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:K(e.gasLimit)},...typeof e.number=="bigint"&&{number:K(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:K(e.prevRandao)},...typeof e.time=="bigint"&&{time:K(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(Qc)}}}const eu="0x82ad56cb",oo="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",tu="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",nu="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",$r="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Vn extends _{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class ao extends _{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class sn extends _{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const En="/docs/contract/encodeDeployData";function Sr(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new la({docsPath:En});if(!("inputs"in s))throw new is({docsPath:En});if(!s.inputs||s.inputs.length===0)throw new is({docsPath:En});const i=vt(s.inputs,n);return be([r,i])}function at({blockNumber:e,chain:t,contract:n}){var s;const r=(s=t==null?void 0:t.contracts)==null?void 0:s[n];if(!r)throw new Vn({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new Vn({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function co(e,{docsPath:t,...n}){const r=(()=>{const s=Yt(e,n);return s instanceof xt?e:s})();return new Pi(r,{docsPath:t,...n})}async function on(e,t){var k,U,w,$;const{account:n=e.account,authorizationList:r,batch:s=!!((k=e.batch)!=null&&k.multicall),blockNumber:i,blockTag:o=e.experimental_blockTag??"latest",accessList:c,blobs:a,blockOverrides:u,code:f,data:d,factory:l,factoryData:b,gas:p,gasPrice:h,maxFeePerBlobGas:g,maxFeePerGas:v,maxPriorityFeePerGas:B,nonce:y,to:m,value:x,stateOverride:I,...P}=t,E=n?te(n):void 0;if(f&&(l||b))throw new _("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(f&&m)throw new _("Cannot provide both `code` & `to` as parameters.");const T=f&&d,R=l&&b&&m&&d,S=T||R,F=T?uo({code:f,data:d}):R?iu({data:d,factory:l,factoryData:b,to:m}):d;try{ot(t);const A=(typeof i=="bigint"?N(i):void 0)||o,C=u?io(u):void 0,O=lr(I),G=($=(w=(U=e.chain)==null?void 0:U.formatters)==null?void 0:w.transactionRequest)==null?void 0:$.format,V=(G||At)({...Jt(P,{format:G}),accessList:c,account:E,authorizationList:r,blobs:a,data:F,gas:p,gasPrice:h,maxFeePerBlobGas:g,maxFeePerGas:v,maxPriorityFeePerGas:B,nonce:y,to:S?void 0:m,value:x},"call");if(s&&ru({request:V})&&!O&&!C)try{return await su(e,{...V,blockNumber:i,blockTag:o})}catch(W){if(!(W instanceof ao)&&!(W instanceof Vn))throw W}const Z=(()=>{const W=[V,A];return O&&C?[...W,O,C]:O?[...W,O]:C?[...W,{},C]:W})(),j=await e.request({method:"eth_call",params:Z});return j==="0x"?{data:void 0}:{data:j}}catch(z){const A=ou(z),{offchainLookup:C,offchainLookupSignature:O}=await Hs(async()=>{const{offchainLookup:G,offchainLookupSignature:H}=await import("./index-D9bD1uxn.js").then(V=>V.c);return{offchainLookup:G,offchainLookupSignature:H}},__vite__mapDeps([0,1,2,3]));if(e.ccipRead!==!1&&(A==null?void 0:A.slice(0,10))===O&&m)return{data:await C(e,{data:A,to:m})};throw S&&(A==null?void 0:A.slice(0,10))==="0x101bb98d"?new H0({factory:l}):co(z,{...t,account:E,chain:e.chain})}}function ru({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(eu)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function su(e,t){var h;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((h=e.batch)==null?void 0:h.multicall)=="object"?e.batch.multicall:{},{blockNumber:i,blockTag:o=e.experimental_blockTag??"latest",data:c,to:a}=t,u=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return at({blockNumber:i,chain:e.chain,contract:"multicall3"});throw new ao})(),d=(typeof i=="bigint"?N(i):void 0)||o,{schedule:l}=ea({id:`${e.uid}.${d}`,wait:s,shouldSplitBatch(g){return g.reduce((B,{data:y})=>B+(y.length-2),0)>n*2},fn:async g=>{const v=g.map(m=>({allowFailure:!0,callData:m.data,target:m.to})),B=he({abi:Ot,args:[v],functionName:"aggregate3"}),y=await e.request({method:"eth_call",params:[{...u===null?{data:uo({code:$r,data:B})}:{to:u,data:B}},d]});return Ze({abi:Ot,args:[v],functionName:"aggregate3",data:y||"0x"})}}),[{returnData:b,success:p}]=await l({data:c,to:a});if(!p)throw new Kt({data:b});return b==="0x"?{data:void 0}:{data:b}}function uo(e){const{code:t,data:n}=e;return Sr({abi:pi(["constructor(bytes, bytes)"]),bytecode:oo,args:[t,n]})}function iu(e){const{data:t,factory:n,factoryData:r,to:s}=e;return Sr({abi:pi(["constructor(address, bytes, address, bytes)"]),bytecode:tu,args:[s,t,n,r]})}function ou(e){var n;if(!(e instanceof _))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function le(e,t){const{abi:n,address:r,args:s,functionName:i,...o}=t,c=he({abi:n,args:s,functionName:i});try{const{data:a}=await L(e,on,"call")({...o,data:c,to:r});return Ze({abi:n,args:s,functionName:i,data:a||"0x"})}catch(a){throw rt(a,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function au(e,t){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...c}=t,a=c.account?te(c.account):e.account,u=he({abi:n,args:s,functionName:o});try{const{data:f}=await L(e,on,"call")({batch:!1,data:`${u}${i?i.replace("0x",""):""}`,to:r,...c,account:a}),d=Ze({abi:n,args:s,functionName:o,data:f||"0x"}),l=n.filter(b=>"name"in b&&b.name===t.functionName);return{result:d,request:{abi:l,address:r,args:s,dataSuffix:i,functionName:o,...c,account:a}}}catch(f){throw rt(f,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:a==null?void 0:a.address})}}const Bn=new Map,Ss=new Map;let cu=0;function Ne(e,t,n){const r=++cu,s=()=>Bn.get(e)||[],i=()=>{const f=s();Bn.set(e,f.filter(d=>d.id!==r))},o=()=>{const f=s();if(!f.some(l=>l.id===r))return;const d=Ss.get(e);if(f.length===1&&d){const l=d();l instanceof Promise&&l.catch(()=>{})}i()},c=s();if(Bn.set(e,[...c,{id:r,fns:t}]),c&&c.length>0)return o;const a={};for(const f in t)a[f]=((...d)=>{var b,p;const l=s();if(l.length!==0)for(const h of l)(p=(b=h.fns)[f])==null||p.call(b,...d)});const u=n(a);return typeof u=="function"&&Ss.set(e,u),o}function ct(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let c;t&&(c=await e({unpoll:i}));const a=await(n==null?void 0:n(c))??r;await es(a);const u=async()=>{s&&(await e({unpoll:i}),await es(r),u())};u()})(),i}const uu=new Map,fu=new Map;function du(e){const t=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=t(e,uu),r=t(e,fu);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function lu(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=du(t),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=e(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const bu=e=>`blockNumber.${e}`;async function Nt(e,{cacheTime:t=e.cacheTime}={}){const n=await lu(()=>e.request({method:"eth_blockNumber"}),{cacheKey:bu(e.uid),cacheTime:t});return BigInt(n)}async function an(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Te(i));return!("abi"in t)||!t.abi?s:vr({abi:t.abi,logs:s,strict:n})}async function cn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function hu(e,t){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:c,onError:a,onLogs:u,poll:f,pollingInterval:d=e.pollingInterval,strict:l}=t;return(typeof f<"u"?f:typeof c=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const g=l??!1,v=we(["watchContractEvent",r,s,i,e.uid,o,d,g,c]);return Ne(v,{onLogs:u,onError:a},B=>{let y;c!==void 0&&(y=c-1n);let m,x=!1;const I=ct(async()=>{var P;if(!x){try{m=await L(e,mi,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:g,fromBlock:c})}catch{}x=!0;return}try{let E;if(m)E=await L(e,an,"getFilterChanges")({filter:m});else{const T=await L(e,Nt,"getBlockNumber")({});y&&y<T?E=await L(e,ji,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:y+1n,toBlock:T,strict:g}):E=[],y=T}if(E.length===0)return;if(i)B.onLogs(E);else for(const T of E)B.onLogs([T])}catch(E){m&&E instanceof sr&&(x=!1),(P=B.onError)==null||P.call(B,E)}},{emitOnBegin:!0,interval:d});return async()=>{m&&await L(e,cn,"uninstallFilter")({filter:m}),I()}})})():(()=>{const g=l??!1,v=we(["watchContractEvent",r,s,i,e.uid,o,d,g]);let B=!0,y=()=>B=!1;return Ne(v,{onLogs:u,onError:a},m=>((async()=>{try{const x=(()=>{if(e.transport.type==="fallback"){const E=e.transport.transports.find(T=>T.config.type==="webSocket"||T.config.type==="ipc");return E?E.value:e.transport}return e.transport})(),I=o?Et({abi:n,eventName:o,args:s}):[],{unsubscribe:P}=await x.subscribe({params:["logs",{address:r,topics:I}],onData(E){var R;if(!B)return;const T=E.result;try{const{eventName:S,args:F}=Ut({abi:n,data:T.data,topics:T.topics,strict:l}),k=Te(T,{args:F,eventName:S});m.onLogs([k])}catch(S){let F,k;if(S instanceof Mt||S instanceof ar){if(l)return;F=S.abiItem.name,k=(R=S.abiItem.inputs)==null?void 0:R.some(w=>!("name"in w&&w.name))}const U=Te(T,{args:k?[]:{},eventName:F});m.onLogs([U])}},onError(E){var T;(T=m.onError)==null||T.call(m,E)}});y=P,B||y()}catch(x){a==null||a(x)}})(),()=>y()))})()}async function pu(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}class mu extends _{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}const fo={"0x0":"reverted","0x1":"success"};function Tr(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>Te(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?ie(e.transactionIndex):null,status:e.status?fo[e.status]:null,type:e.type?Ni[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const Pl=dr("transactionReceipt",Tr),yu="0x5792579257925792579257925792579257925792579257925792579257925792",gu=N(0,{size:32});async function wu(e,t){async function n(f){if(f.endsWith(yu.slice(2))){const l=Ae(os(f,-64,-32)),b=os(f,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(b.map(g=>gu.slice(2)!==g?e.request({method:"eth_getTransactionReceipt",params:[`0x${g}`]},{dedupe:!0}):void 0)),h=p.some(g=>g===null)?100:p.every(g=>(g==null?void 0:g.status)==="0x1")?200:p.every(g=>(g==null?void 0:g.status)==="0x0")?500:600;return{atomic:!1,chainId:ie(l),receipts:p.filter(Boolean),status:h,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[f]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...c}=await n(t.id),[a,u]=(()=>{const f=c.status;return f>=100&&f<200?["pending",f]:f>=200&&f<300?["success",f]:f>=300&&f<700?["failure",f]:f==="CONFIRMED"?["success",200]:f==="PENDING"?["pending",100]:[void 0,f]})();return{...c,atomic:r,chainId:s?ie(s):void 0,receipts:(i==null?void 0:i.map(f=>({...f,blockNumber:ce(f.blockNumber),gasUsed:ce(f.gasUsed),status:fo[f.status]})))??[],statusCode:u,status:a,version:o}}async function El(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:s=({statusCode:h})=>h===200||h>=300,retryCount:i=4,retryDelay:o=({count:h})=>~~(1<<h)*200,timeout:c=6e4,throwOnFailure:a=!1}=t,u=we(["waitForCallsStatus",e.uid,n]),{promise:f,resolve:d,reject:l}=Ds();let b;const p=Ne(u,{resolve:d,reject:l},h=>{const g=ct(async()=>{const v=B=>{clearTimeout(b),g(),B(),p()};try{const B=await Rn(async()=>{const y=await L(e,wu,"getCallsStatus")({id:n});if(a&&y.status==="failure")throw new mu(y);return y},{retryCount:i,delay:o});if(!s(B))return;v(()=>h.resolve(B))}catch(B){v(()=>h.reject(B))}},{interval:r,emitOnBegin:!0});return g});return b=c?setTimeout(()=>{p(),clearTimeout(b),l(new xu({id:n}))},c):void 0,await f}class xu extends _{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function vu(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=e,c=e.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),a=(n==null?void 0:n.blockTime)??12e3,u=Math.min(Math.max(Math.floor(a/2),500),4e3),f=e.pollingInterval??u,d=e.cacheTime??f,l=e.account?te(e.account):void 0,{config:b,request:p,value:h}=e.transport({account:l,chain:n,pollingInterval:f}),g={...b,...h},v={account:l,batch:t,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:f,request:p,transport:g,type:o,uid:ta(),...c?{experimental_blockTag:c}:{}};function B(y){return m=>{const x=m(y);for(const P in v)delete x[P];const I={...y,...x};return Object.assign(I,{extend:B(I)})}}return Object.assign(v,{extend:B(v)})}function Nr(e){var n,r,s,i,o,c;if(!(e instanceof _))return!1;const t=e.walk(a=>a instanceof Hn);return t instanceof Hn?((n=t.data)==null?void 0:n.errorName)==="HttpError"||((r=t.data)==null?void 0:r.errorName)==="ResolverError"||((s=t.data)==null?void 0:s.errorName)==="ResolverNotContract"||((i=t.data)==null?void 0:i.errorName)==="ResolverNotFound"||((o=t.data)==null?void 0:o.errorName)==="ReverseAddressMismatch"||((c=t.data)==null?void 0:c.errorName)==="UnsupportedResolverProfile":!1}function Pu(e){const{abi:t,data:n}=e,r=pt(n,0,4),s=t.find(i=>i.type==="function"&&r===or(qe(i)));if(!s)throw new ba(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Bt(s.inputs,pt(n,4)):void 0}}const In="/docs/contract/encodeErrorResult";function Ts(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const a=st({abi:t,args:r,name:n});if(!a)throw new as(n,{docsPath:In});s=a}if(s.type!=="error")throw new as(void 0,{docsPath:In});const i=qe(s),o=or(i);let c="0x";if(r&&r.length>0){if(!s.inputs)throw new ha(s.name,{docsPath:In});c=vt(s.inputs,r)}return be([o,c])}const An="/docs/contract/encodeFunctionResult";function Eu(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const o=st({abi:t,name:n});if(!o)throw new Gt(n,{docsPath:An});s=o}if(s.type!=="function")throw new Gt(void 0,{docsPath:An});if(!s.outputs)throw new ri(s.name,{docsPath:An});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new pa(r)})();return vt(s.outputs,i)}const un="x-batch-gateway:true";async function Bu(e){const{data:t,ccipRequest:n}=e,{args:[r]}=Pu({abi:On,data:t}),s=[],i=[];return await Promise.all(r.map(async(o,c)=>{try{i[c]=o.urls.includes(un)?await Bu({data:o.data,ccipRequest:n}):await n(o),s[c]=!1}catch(a){s[c]=!0,i[c]=Iu(a)}})),Eu({abi:On,functionName:"query",result:[s,i]})}function Iu(e){return e.name==="HttpRequestError"&&e.status?Ts({abi:On,errorName:"HttpError",args:[e.status,e.shortMessage]}):Ts({abi:[yi],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function lo(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return ht(t)?t:null}function qn(e){let t=new Uint8Array(32).fill(0);if(!e)return q(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=lo(n[r]),i=s?Vt(s):Ue(bt(n[r]),"bytes");t=Ue(si([t,i]),"bytes")}return q(t)}function Au(e){return`[${e.slice(2)}]`}function $u(e){const t=new Uint8Array(32).fill(0);return e?lo(e)||Ue(bt(e)):q(t)}function kr(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(bt(t).byteLength+2);let r=0;const s=t.split(".");for(let i=0;i<s.length;i++){let o=bt(s[i]);o.byteLength>255&&(o=bt(Au($u(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function Su(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a==null?void 0:a.ensTlds;if(f&&!f.some(l=>i.endsWith(l)))return null;const d=s!=null?[qn(i),BigInt(s)]:[qn(i)];try{const l=he({abi:ts,functionName:"addr",args:d}),b={address:u,abi:Vs,functionName:"resolveWithGateways",args:[Ge(kr(i)),l,o??[un]],blockNumber:n,blockTag:r},h=await L(e,le,"readContract")(b);if(h[0]==="0x")return null;const g=Ze({abi:ts,args:d,functionName:"addr",data:h[0]});return g==="0x"||Ae(g)==="0x00"?null:g}catch(l){if(c)throw l;if(Nr(l))return null;throw l}}class Tu extends _{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class lt extends _{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class Fr extends _{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Nu extends _{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const ku=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Fu=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Cu=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,zu=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Ru(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Ns(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function bo({uri:e,gatewayUrls:t}){const n=Cu.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Ns(t==null?void 0:t.ipfs,"https://ipfs.io"),s=Ns(t==null?void 0:t.arweave,"https://arweave.net"),i=e.match(ku),{protocol:o,subpath:c,target:a,subtarget:u=""}=(i==null?void 0:i.groups)||{},f=o==="ipns:/"||c==="ipns/",d=o==="ipfs:/"||c==="ipfs/"||Fu.test(e);if(e.startsWith("http")&&!f&&!d){let b=e;return t!=null&&t.arweave&&(b=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:b,isOnChain:!1,isEncoded:!1}}if((f||d)&&a)return{uri:`${r}/${f?"ipns":"ipfs"}/${a}${u}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&a)return{uri:`${s}/${a}${u||""}`,isOnChain:!1,isEncoded:!1};let l=e.replace(zu,"");if(l.startsWith("<svg")&&(l=`data:image/svg+xml;base64,${btoa(l)}`),l.startsWith("data:")||l.startsWith("{"))return{uri:l,isOnChain:!0,isEncoded:!1};throw new Fr({uri:e})}function ho(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Tu({data:e});return e.image||e.image_url||e.image_data}async function Ou({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Cr({gatewayUrls:e,uri:ho(n)})}catch{throw new Fr({uri:t})}}async function Cr({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=bo({uri:t,gatewayUrls:e});if(r||await Ru(n))return n;throw new Fr({uri:t})}function Lu(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[i,o]=n.split(":"),[c,a]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new lt({reason:"Only EIP-155 supported"});if(!o)throw new lt({reason:"Chain ID not found"});if(!a)throw new lt({reason:"Contract address not found"});if(!s)throw new lt({reason:"Token ID not found"});if(!c)throw new lt({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o,10),namespace:c.toLowerCase(),contractAddress:a,tokenID:s}}async function _u(e,{nft:t}){if(t.namespace==="erc721")return le(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return le(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Nu({namespace:t.namespace})}async function Mu(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?Gu(e,{gatewayUrls:t,record:n}):Cr({uri:n,gatewayUrls:t})}async function Gu(e,{gatewayUrls:t,record:n}){const r=Lu(n),s=await _u(e,{nft:r}),{uri:i,isOnChain:o,isEncoded:c}=bo({uri:s,gatewayUrls:t});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const u=c?atob(i.replace("data:application/json;base64,","")):i,f=JSON.parse(u);return Cr({uri:ho(f),gatewayUrls:t})}let a=r.tokenID;return r.namespace==="erc1155"&&(a=a.replace("0x","").padStart(64,"0")),Ou({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,a)})}async function po(e,t){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:a,contract:"ensUniversalResolver"})})(),f=a==null?void 0:a.ensTlds;if(f&&!f.some(d=>i.endsWith(d)))return null;try{const d={address:u,abi:Vs,args:[Ge(kr(i)),he({abi:ns,functionName:"text",args:[qn(i),s]}),o??[un]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},b=await L(e,le,"readContract")(d);if(b[0]==="0x")return null;const p=Ze({abi:ns,functionName:"text",data:b[0]});return p===""?null:p}catch(d){if(c)throw d;if(Nr(d))return null;throw d}}async function Uu(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:c}){const a=await L(e,po,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:c,gatewayUrls:i,strict:o});if(!a)return null;try{return await Mu(e,{record:a,gatewayUrls:r})}catch{return null}}async function Hu(e,t){const{address:n,blockNumber:r,blockTag:s,coinType:i=60n,gatewayUrls:o,strict:c}=t,{chain:a}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:r,chain:a,contract:"ensUniversalResolver"})})();try{const f={address:u,abi:na,args:[n,i,o??[un]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},d=L(e,le,"readContract"),[l]=await d(f);return l||null}catch(f){if(c)throw f;if(Nr(f))return null;throw f}}async function ju(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:i}=e,o=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return at({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),c=i==null?void 0:i.ensTlds;if(c&&!c.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${c==null?void 0:c.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[a]=await L(e,le,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ge(kr(s))],blockNumber:n,blockTag:r});return a}async function mo(e,t){var g,v,B;const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:b,...p}=t,h=n?te(n):void 0;try{ot(t);const m=(typeof r=="bigint"?N(r):void 0)||s,x=(B=(v=(g=e.chain)==null?void 0:g.formatters)==null?void 0:v.transactionRequest)==null?void 0:B.format,P=(x||At)({...Jt(p,{format:x}),account:h,blobs:i,data:o,gas:c,gasPrice:a,maxFeePerBlobGas:u,maxFeePerGas:f,maxPriorityFeePerGas:d,to:l,value:b},"createAccessList"),E=await e.request({method:"eth_createAccessList",params:[P,m]});return{accessList:E.accessList,gasUsed:BigInt(E.gasUsed)}}catch(y){throw co(y,{...t,account:h,chain:e.chain})}}async function Du(e){const t=Wt(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function yo(e,{address:t,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:c}={}){const a=s??(r?[r]:void 0),u=Wt(e,{method:"eth_newFilter"});let f=[];a&&(f=[a.flatMap(b=>Et({abi:[b],eventName:b.name,args:n}))],r&&(f=f[0]));const d=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof i=="bigint"?N(i):i,toBlock:typeof c=="bigint"?N(c):c,...f.length?{topics:f}:{}}]});return{abi:a,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:u(d),strict:!!o,toBlock:c,type:"event"}}async function go(e){const t=Wt(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function Vu(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?N(n):void 0,i=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(i)}async function qu(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function Zu(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?N(n):void 0;let i;return t?i=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):i=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),ie(i)}async function Zn(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?N(n):void 0,i=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(i!=="0x")return i}class Wu extends _{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Ku(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[i,o,c,a,u,f,d]=await L(e,le,"readContract")({abi:Yu,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:c,chainId:Number(a),verifyingContract:u,salt:f},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Wu({address:n}):o}}const Yu=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Ju(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function Xu(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?N(n):void 0,o=await e.request({method:"eth_feeHistory",params:[N(t),i||r,s]},{dedupe:!!i});return Ju(o)}async function Qu(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(i=>Te(i));return t.abi?vr({abi:t.abi,logs:s,strict:n}):s}function Bl(e,t){if(e.length!==t.length)throw new ma({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],i=t[r];n.push(wo(s,i))}return be(n)}function wo(e,t,n=!1){if(e==="address"){const o=t;if(!oe(o))throw new ue({address:o});return mn(o.toLowerCase(),{size:n?32:null})}if(e==="string")return ra(t);if(e==="bytes")return t;if(e==="bool")return mn(sa(t),{size:n?32:1});const r=e.match(ya);if(r){const[o,c,a="256"]=r,u=Number.parseInt(a,10)/8;return N(t,{size:n?32:u,signed:c==="int"})}const s=e.match(ga);if(s){const[o,c]=s;if(Number.parseInt(c,10)!==(t.length-2)/2)throw new wa({expectedSize:Number.parseInt(c,10),givenSize:(t.length-2)/2});return mn(t,{dir:"right",size:n?32:null})}const i=e.match(xa);if(i&&Array.isArray(t)){const[o,c]=i,a=[];for(let u=0;u<t.length;u++)a.push(wo(c,t[u],!0));return a.length===0?"0x":be(a)}throw new va(e)}function ef(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:r}=n,s=n.address;if(!oe(s))throw new ue({address:s});if(r<0)throw new sn({chainId:r})}zr(e)}function tf(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new _i;for(const n of t){const r=ze(n),s=ie(pt(n,0,1));if(r!==32)throw new hc({hash:n,size:r});if(s!==Li)throw new pc({hash:n,version:s})}}zr(e)}function zr(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new sn({chainId:t});if(s&&!oe(s))throw new ue({address:s});if(r&&r>Xt)throw new nt({maxFeePerGas:r});if(n&&r&&n>r)throw new Rt({maxFeePerGas:r,maxPriorityFeePerGas:n})}function nf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=e;if(t<=0)throw new sn({chainId:t});if(i&&!oe(i))throw new ue({address:i});if(n||s)throw new _("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Xt)throw new nt({maxFeePerGas:r})}function rf(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:i}=e;if(i&&!oe(i))throw new ue({address:i});if(typeof t<"u"&&t<=0)throw new sn({chainId:t});if(n||s)throw new _("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Xt)throw new nt({maxFeePerGas:r})}function fn(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new L0({storageKey:s[i]});if(!oe(r,{strict:!1}))throw new ue({address:r});t.push([r,s])}return t}function Il(e,t){const n=Gi(e);return n==="eip1559"?af(e,t):n==="eip2930"?cf(e,t):n==="eip4844"?of(e,t):n==="eip7702"?sf(e,t):uf(e,t)}function sf(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:i,to:o,value:c,maxFeePerGas:a,maxPriorityFeePerGas:u,accessList:f,data:d}=e;ef(e);const l=fn(f),b=ff(n);return be(["0x04",He([N(r),i?N(i):"0x",u?N(u):"0x",a?N(a):"0x",s?N(s):"0x",o??"0x",c?N(c):"0x",d??"0x",l,b,...kt(e,t)])])}function of(e,t){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerBlobGas:c,maxFeePerGas:a,maxPriorityFeePerGas:u,accessList:f,data:d}=e;tf(e);let l=e.blobVersionedHashes,b=e.sidecars;if(e.blobs&&(typeof l>"u"||typeof b>"u")){const y=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(I=>q(I)),m=e.kzg,x=mr({blobs:y,kzg:m});if(typeof l>"u"&&(l=zi({commitments:x})),typeof b>"u"){const I=yr({blobs:y,commitments:x,kzg:m});b=Mi({blobs:y,commitments:x,proofs:I})}}const p=fn(f),h=[N(n),s?N(s):"0x",u?N(u):"0x",a?N(a):"0x",r?N(r):"0x",i??"0x",o?N(o):"0x",d??"0x",p,c?N(c):"0x",l??[],...kt(e,t)],g=[],v=[],B=[];if(b)for(let y=0;y<b.length;y++){const{blob:m,commitment:x,proof:I}=b[y];g.push(m),v.push(x),B.push(I)}return be(["0x03",He(b?[h,g,v,B]:h)])}function af(e,t){const{chainId:n,gas:r,nonce:s,to:i,value:o,maxFeePerGas:c,maxPriorityFeePerGas:a,accessList:u,data:f}=e;zr(e);const d=fn(u),l=[N(n),s?N(s):"0x",a?N(a):"0x",c?N(c):"0x",r?N(r):"0x",i??"0x",o?N(o):"0x",f??"0x",d,...kt(e,t)];return be(["0x02",He(l)])}function cf(e,t){const{chainId:n,gas:r,data:s,nonce:i,to:o,value:c,accessList:a,gasPrice:u}=e;nf(e);const f=fn(a),d=[N(n),i?N(i):"0x",u?N(u):"0x",r?N(r):"0x",o??"0x",c?N(c):"0x",s??"0x",f,...kt(e,t)];return be(["0x01",He(d)])}function uf(e,t){const{chainId:n=0,gas:r,data:s,nonce:i,to:o,value:c,gasPrice:a}=e;rf(e);let u=[i?N(i):"0x",a?N(a):"0x",r?N(r):"0x",o??"0x",c?N(c):"0x",s??"0x"];if(t){const f=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const b=27n+(t.v===27n?0n:1n);if(t.v!==b)throw new R0({v:t.v});return b})(),d=Ae(t.r),l=Ae(t.s);u=[...u,N(f),d==="0x00"?"0x":d,l==="0x00"?"0x":l]}else n>0&&(u=[...u,N(n),"0x","0x"]);return He(u)}function kt(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const i=Ae(n.r),o=Ae(n.s);return[typeof s=="number"?s?N(1):"0x":r===0n?"0x":r===1n?N(1):r===27n?"0x":N(1),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function ff(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:r,nonce:s,...i}=n,o=n.address;t.push([r?Ge(r):"0x",o,s?Ge(s):"0x",...kt({},i)])}return t}async function df({address:e,authorization:t,signature:n}){return en(ii(e),await $i({authorization:t,signature:n}))}function Al(e){const t={formatters:void 0,fees:void 0,serializers:void 0,...e};function n(r){return s=>{const i=typeof s=="function"?s(r):s,o={...r,...i};return Object.assign(o,{extend:n(o)})}}return Object.assign(t,{extend:n(t)})}function $l(e){const{source:t}=e,n=new Map,r=new js(8192),s=new Map,i=({address:o,chainId:c})=>`${o}.${c}`;return{async consume({address:o,chainId:c,client:a}){const u=i({address:o,chainId:c}),f=this.get({address:o,chainId:c,client:a});this.increment({address:o,chainId:c});const d=await f;return await t.set({address:o,chainId:c},d),r.set(u,d),d},async increment({address:o,chainId:c}){const a=i({address:o,chainId:c}),u=n.get(a)??0;n.set(a,u+1)},async get({address:o,chainId:c,client:a}){const u=i({address:o,chainId:c});let f=s.get(u);return f||(f=(async()=>{try{const l=await t.get({address:o,chainId:c,client:a}),b=r.get(u)??0;return b>0&&l<=b?b+1:(r.delete(u),l)}finally{this.reset({address:o,chainId:c})}})(),s.set(u,f)),(n.get(u)??0)+await f},reset({address:o,chainId:c}){const a=i({address:o,chainId:c});n.delete(a),s.delete(a)}}}const lf="0x6492649264926492649264926492649264926492649264926492649264926492";class bf extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const hf={checksum:new bf(8192)},$n=hf.checksum;function xo(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Pa(zc(e));return n==="Bytes"?r:de(r)}const pf=/^0x[a-fA-F0-9]{40}$/;function dn(e,t={}){const{strict:n=!0}=t;if(!pf.test(e))throw new ks({address:e,cause:new mf});if(n){if(e.toLowerCase()===e)return;if(vo(e)!==e)throw new ks({address:e,cause:new yf})}}function vo(e){if($n.has(e))return $n.get(e);dn(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=xo(Oc(t),{as:"Bytes"}),r=t.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return $n.set(e,s),s}function Wn(e,t={}){const{strict:n=!0}=t??{};try{return dn(e,{strict:n}),!0}catch{return!1}}class ks extends M{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class mf extends M{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class yf extends M{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const gf=/^(.*)\[([0-9]*)\]$/,wf=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Po=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Fs=2n**256n-1n;function tt(e,t,n){const{checksumAddress:r,staticPosition:s}=n,i=Lr(t.type);if(i){const[o,c]=i;return vf(e,{...t,type:c},{checksumAddress:r,length:o,staticPosition:s})}if(t.type==="tuple")return If(e,t,{checksumAddress:r,staticPosition:s});if(t.type==="address")return xf(e,{checksum:r});if(t.type==="bool")return Pf(e);if(t.type.startsWith("bytes"))return Ef(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Bf(e,t);if(t.type==="string")return Af(e,{staticPosition:s});throw new Mr(t.type)}const Cs=32,Kn=32;function xf(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32);return[(i=>n?vo(i):i)(de(_c(r,-20))),32]}function vf(e,t,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const a=Ie(e.readBytes(Kn)),u=i+a,f=u+Cs;e.setPosition(u);const d=Ie(e.readBytes(Cs)),l=wt(t);let b=0;const p=[];for(let h=0;h<d;++h){e.setPosition(f+(l?h*32:b));const[g,v]=tt(e,t,{checksumAddress:r,staticPosition:f});b+=v,p.push(g)}return e.setPosition(i+32),[p,32]}if(wt(t)){const a=Ie(e.readBytes(Kn)),u=i+a,f=[];for(let d=0;d<s;++d){e.setPosition(u+d*32);const[l]=tt(e,t,{checksumAddress:r,staticPosition:u});f.push(l)}return e.setPosition(i+32),[f,32]}let o=0;const c=[];for(let a=0;a<s;++a){const[u,f]=tt(e,t,{checksumAddress:r,staticPosition:i+o});o+=f,c.push(u)}return[c,o]}function Pf(e){return[Gc(e.readBytes(32),{size:32}),32]}function Ef(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const o=Ie(e.readBytes(32));e.setPosition(n+o);const c=Ie(e.readBytes(32));if(c===0)return e.setPosition(n+32),["0x",32];const a=e.readBytes(c);return e.setPosition(n+32),[de(a),32]}return[de(e.readBytes(Number.parseInt(s,10),32)),32]}function Bf(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?Mc(s,{signed:n}):Ie(s,{signed:n}),32]}function If(e,t,n){const{checksumAddress:r,staticPosition:s}=n,i=t.components.length===0||t.components.some(({name:a})=>!a),o=i?[]:{};let c=0;if(wt(t)){const a=Ie(e.readBytes(Kn)),u=s+a;for(let f=0;f<t.components.length;++f){const d=t.components[f];e.setPosition(u+c);const[l,b]=tt(e,d,{checksumAddress:r,staticPosition:u});c+=b,o[i?f:d==null?void 0:d.name]=l}return e.setPosition(s+32),[o,32]}for(let a=0;a<t.components.length;++a){const u=t.components[a],[f,d]=tt(e,u,{checksumAddress:r,staticPosition:s});o[i?a:u==null?void 0:u.name]=f,c+=d}return[o,c]}function Af(e,{staticPosition:t}){const n=Ie(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ie(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),o=Uc(Qi(i));return e.setPosition(t+32),[o,32]}function $f({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(Rr({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function Rr({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=Lr(r.type);if(s){const[i,o]=s;return Tf(n,{checksumAddress:e,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return zf(n,{checksumAddress:e,parameter:r});if(r.type==="address")return Sf(n,{checksum:e});if(r.type==="bool")return kf(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=Po.exec(r.type)??[];return Ff(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Nf(n,{type:r.type});if(r.type==="string")return Cf(n);throw new Mr(r.type)}function Or(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:c}=e[i];o?t+=32:t+=ne(c)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:c}=e[i];o?(n.push(K(t+s,{size:32})),r.push(c),s+=ne(c)):n.push(c)}return fe(...n,...r)}function Sf(e,t){const{checksum:n=!1}=t;return dn(e,{strict:n}),{dynamic:!1,encoded:je(e.toLowerCase())}}function Tf(e,t){const{checksumAddress:n,length:r,parameter:s}=t,i=r===null;if(!Array.isArray(e))throw new jf(e);if(!i&&e.length!==r)throw new Hf({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let o=!1;const c=[];for(let a=0;a<e.length;a++){const u=Rr({checksumAddress:n,parameter:s,value:e[a]});u.dynamic&&(o=!0),c.push(u)}if(i||o){const a=Or(c);if(i){const u=K(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?fe(u,a):u}}if(o)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:fe(...c.map(({encoded:a})=>a))}}function Nf(e,{type:t}){const[,n]=t.split("bytes"),r=ne(e);if(!n){let s=e;return r%32!==0&&(s=De(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:fe(je(K(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new Bo({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:De(e)}}function kf(e){if(typeof e!="boolean")throw new M(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:je(eo(e))}}function Ff(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new ro({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:K(e,{size:32,signed:t})}}function Cf(e){const t=Ar(e),n=Math.ceil(ne(t)/32),r=[];for(let s=0;s<n;s++)r.push(De(ge(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:fe(De(K(ne(t),{size:32})),...r)}}function zf(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const c=r.components[o],a=Array.isArray(e)?o:c.name,u=Rr({checksumAddress:n,parameter:c,value:e[a]});i.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Or(i):fe(...i.map(({encoded:o})=>o))}}function Lr(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function wt(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(wt);const n=Lr(e.type);return!!(n&&wt({...e,type:n[1]}))}const Rf={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new _f({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Lf({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new zs({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new zs({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Of(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Rf);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}class zs extends M{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class Lf extends M{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class _f extends M{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function Mf(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i=typeof t=="string"?Xi(t):t,o=Of(i);if(Je(i)===0&&e.length>0)throw new Uf;if(Je(i)&&Je(i)<32)throw new Gf({data:typeof t=="string"?t:de(t),parameters:e,size:Je(i)});let c=0;const a=r==="Array"?[]:{};for(let u=0;u<e.length;++u){const f=e[u];o.setPosition(c);const[d,l]=tt(o,f,{checksumAddress:s,staticPosition:0});c+=l,r==="Array"?a.push(d):a[f.name??u]=d}return a}function _r(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new Io({expectedLength:e.length,givenLength:t.length});const s=$f({checksumAddress:r,parameters:e,values:t}),i=Or(s);return i.length===0?"0x":i}function Yn(e,t){if(e.length!==t.length)throw new Io({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],i=t[r];n.push(Yn.encode(s,i))}return fe(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const a=r;return dn(a),je(a.toLowerCase(),s?32:0)}if(n==="string")return Ar(r);if(n==="bytes")return r;if(n==="bool")return je(eo(r),s?32:1);const i=n.match(Po);if(i){const[a,u,f="256"]=i,d=Number.parseInt(f,10)/8;return K(r,{size:s?32:d,signed:u==="int"})}const o=n.match(wf);if(o){const[a,u]=o;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new Bo({expectedSize:Number.parseInt(u,10),value:r});return De(r,s?32:0)}const c=n.match(gf);if(c&&Array.isArray(r)){const[a,u]=c,f=[];for(let d=0;d<r.length;d++)f.push(t(u,r[d],!0));return f.length===0?"0x":fe(...f)}throw new Mr(n)}e.encode=t})(Yn||(Yn={}));function Eo(e){return Array.isArray(e)&&typeof e[0]=="string"||typeof e=="string"?fs(e):e}class Gf extends M{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Ea(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class Uf extends M{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class Hf extends M{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class Bo extends M{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ne(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class Io extends M{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class jf extends M{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class Mr extends M{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}class Ao extends ei{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Ba(t);const r=ti(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),_t(i)}update(t){return Lt(this),this.iHash.update(t),this}digestInto(t){Lt(this),ni(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const $o=(e,t,n)=>new Ao(e,t).update(n).digest();$o.create=(e,t)=>new Ao(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const X=BigInt(0),Y=BigInt(1),_e=BigInt(2),Df=BigInt(3),So=BigInt(4),To=BigInt(5),No=BigInt(8);function J(e,t){const n=e%t;return n>=X?n:t+n}function re(e,t,n){let r=e;for(;t-- >X;)r*=r,r%=n;return r}function Jn(e,t){if(e===X)throw new Error("invert: expected non-zero number");if(t<=X)throw new Error("invert: expected positive modulus, got "+t);let n=J(e,t),r=t,s=X,i=Y;for(;n!==X;){const c=r/n,a=r%n,u=s-i*c;r=n,n=a,s=i,i=u}if(r!==Y)throw new Error("invert: does not exist");return J(s,t)}function ko(e,t){const n=(e.ORDER+Y)/So,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Vf(e,t){const n=(e.ORDER-To)/No,r=e.mul(t,_e),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,_e),s),c=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(c),t))throw new Error("Cannot find square root");return c}function qf(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-Y,n=0;for(;t%_e===X;)t/=_e,n++;let r=_e;const s=Gr(e);for(;Rs(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return ko;let i=s.pow(r,t);const o=(t+Y)/_e;return function(a,u){if(a.is0(u))return u;if(Rs(a,u)!==1)throw new Error("Cannot find square root");let f=n,d=a.mul(a.ONE,i),l=a.pow(u,t),b=a.pow(u,o);for(;!a.eql(l,a.ONE);){if(a.is0(l))return a.ZERO;let p=1,h=a.sqr(l);for(;!a.eql(h,a.ONE);)if(p++,h=a.sqr(h),p===f)throw new Error("Cannot find square root");const g=Y<<BigInt(f-p-1),v=a.pow(d,g);f=p,d=a.sqr(v),l=a.mul(l,d),b=a.mul(b,v)}return b}}function Zf(e){return e%So===Df?ko:e%No===To?Vf:qf(e)}const Wf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kf(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Wf.reduce((r,s)=>(r[s]="function",r),t);return nn(e,n)}function Yf(e,t,n){if(n<X)throw new Error("invalid exponent, negatives unsupported");if(n===X)return e.ONE;if(n===Y)return t;let r=e.ONE,s=t;for(;n>X;)n&Y&&(r=e.mul(r,s)),s=e.sqr(s),n>>=Y;return r}function Fo(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((o,c,a)=>e.is0(c)?o:(r[a]=o,e.mul(o,c)),e.ONE),i=e.inv(s);return t.reduceRight((o,c,a)=>e.is0(c)?o:(r[a]=e.mul(o,r[a]),e.mul(o,c)),i),r}function Rs(e,t){const n=(e.ORDER-Y)/_e,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Co(e,t){t!==void 0&&Ia(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Gr(e,t,n=!1,r={}){if(e<=X)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:i}=Co(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:i,MASK:tn(s),ZERO:X,ONE:Y,create:a=>J(a,e),isValid:a=>{if(typeof a!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof a);return X<=a&&a<e},is0:a=>a===X,isOdd:a=>(a&Y)===Y,neg:a=>J(-a,e),eql:(a,u)=>a===u,sqr:a=>J(a*a,e),add:(a,u)=>J(a+u,e),sub:(a,u)=>J(a-u,e),mul:(a,u)=>J(a*u,e),pow:(a,u)=>Yf(c,a,u),div:(a,u)=>J(a*Jn(u,e),e),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>Jn(a,e),sqrt:r.sqrt||(a=>(o||(o=Zf(e)),o(c,a))),toBytes:a=>n?Zi(a,i):St(a,i),fromBytes:a=>{if(a.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+a.length);return n?qi(a):Me(a)},invertBatch:a=>Fo(c,a),cmov:(a,u,f)=>f?u:a});return Object.freeze(c)}function zo(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ro(e){const t=zo(e);return t+Math.ceil(t/2)}function Jf(e,t,n=!1){const r=e.length,s=zo(t),i=Ro(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?qi(e):Me(e),c=J(o,t-Y)+Y;return n?Zi(c,s):St(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Os=BigInt(0),Xn=BigInt(1);function Sn(e,t){const n=t.negate();return e?n:t}function Oo(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Tn(e,t){Oo(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,i=tn(e),o=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Ls(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let c=Number(e&s),a=e>>o;c>r&&(c-=i,a+=Xn);const u=t*r,f=u+Math.abs(c)-1,d=c===0,l=c<0,b=t%2!==0;return{nextN:a,offset:f,isZero:d,isNeg:l,isNegF:b,offsetF:u}}function Xf(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Qf(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Nn=new WeakMap,Lo=new WeakMap;function kn(e){return Lo.get(e)||1}function ed(e,t){return{constTimeNegate:Sn,hasPrecomputes(n){return kn(n)!==1},unsafeLadder(n,r,s=e.ZERO){let i=n;for(;r>Os;)r&Xn&&(s=s.add(i)),i=i.double(),r>>=Xn;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Tn(r,t),o=[];let c=n,a=c;for(let u=0;u<s;u++){a=c,o.push(a);for(let f=1;f<i;f++)a=a.add(c),o.push(a);c=a.double()}return o},wNAF(n,r,s){let i=e.ZERO,o=e.BASE;const c=Tn(n,t);for(let a=0;a<c.windows;a++){const{nextN:u,offset:f,isZero:d,isNeg:l,isNegF:b,offsetF:p}=Ls(s,a,c);s=u,d?o=o.add(Sn(b,r[p])):i=i.add(Sn(l,r[f]))}return{p:i,f:o}},wNAFUnsafe(n,r,s,i=e.ZERO){const o=Tn(n,t);for(let c=0;c<o.windows&&s!==Os;c++){const{nextN:a,offset:u,isZero:f,isNeg:d}=Ls(s,c,o);if(s=a,!f){const l=r[u];i=i.add(d?l.negate():l)}}return i},getPrecomputes(n,r,s){let i=Nn.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&Nn.set(r,s(i))),i},wNAFCached(n,r,s){const i=kn(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=kn(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Oo(r,t),Lo.set(n,r),Nn.delete(n)}}}function td(e,t,n,r){Xf(n,e),Qf(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,c=Ec(BigInt(s));let a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);const u=tn(a),f=new Array(Number(u)+1).fill(o),d=Math.floor((t.BITS-1)/a)*a;let l=o;for(let b=d;b>=0;b-=a){f.fill(o);for(let h=0;h<i;h++){const g=r[h],v=Number(g>>BigInt(b)&u);f[v]=f[v].add(n[h])}let p=o;for(let h=f.length-1,g=o;h>0;h--)g=g.add(f[h]),p=p.add(g);if(l=l.add(p),b!==0)for(let h=0;h<a;h++)l=l.double()}return l}function _o(e){return Kf(e.Fp),nn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Co(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function _s(e){e.lowS!==void 0&&yt("lowS",e.lowS),e.prehash!==void 0&&yt("prehash",e.prehash)}function nd(e){const t=_o(e);nn(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class rd extends Error{constructor(t=""){super(t)}}const Pe={Err:rd,_tlv:{encode:(e,t)=>{const{Err:n}=Pe;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Ct(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ct(s.length/2|128):"";return Ct(e)+i+s+t},decode(e,t){const{Err:n}=Pe;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const a=s&127;if(!a)throw new n("tlv.decode(long): indefinite length not supported");if(a>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+a);if(u.length!==a)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const f of u)o=o<<8|f;if(r+=a,o<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+o);if(c.length!==o)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=Pe;if(e<Ee)throw new t("integer: negative integers are not allowed");let n=Ct(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Pe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Me(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Pe,s=se("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:a}=r.decode(2,i),{v:u,l:f}=r.decode(2,a);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Pe,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),i=r+s;return t.encode(48,i)}};function Fn(e,t){return gt(St(e,t))}const Ee=BigInt(0),D=BigInt(1);BigInt(2);const Cn=BigInt(3),sd=BigInt(4);function id(e){const t=nd(e),{Fp:n}=t,r=Gr(t.n,t.nBitLength),s=t.toBytes||((y,m,x)=>{const I=m.toAffine();return jt(Uint8Array.from([4]),n.toBytes(I.x),n.toBytes(I.y))}),i=t.fromBytes||(y=>{const m=y.subarray(1),x=n.fromBytes(m.subarray(0,n.BYTES)),I=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x,y:I}});function o(y){const{a:m,b:x}=t,I=n.sqr(y),P=n.mul(I,y);return n.add(n.add(P,n.mul(y,m)),x)}function c(y,m){const x=n.sqr(m),I=o(y);return n.eql(x,I)}if(!c(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const a=n.mul(n.pow(t.a,Cn),sd),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(a,u)))throw new Error("bad curve params: a or b");function f(y){return Ir(y,D,t.n)}function d(y){const{allowedPrivateKeyLengths:m,nByteLength:x,wrapPrivateKey:I,n:P}=t;if(m&&typeof y!="bigint"){if($t(y)&&(y=gt(y)),typeof y!="string"||!m.includes(y.length))throw new Error("invalid private key");y=y.padStart(x*2,"0")}let E;try{E=typeof y=="bigint"?y:Me(se("private key",y,x))}catch{throw new Error("invalid private key, expected hex or "+x+" bytes, got "+typeof y)}return I&&(E=J(E,P)),et("private key",E,D,P),E}function l(y){if(!(y instanceof h))throw new Error("ProjectivePoint expected")}const b=Bs((y,m)=>{const{px:x,py:I,pz:P}=y;if(n.eql(P,n.ONE))return{x,y:I};const E=y.is0();m==null&&(m=E?n.ONE:n.inv(P));const T=n.mul(x,m),R=n.mul(I,m),S=n.mul(P,m);if(E)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:T,y:R}}),p=Bs(y=>{if(y.is0()){if(t.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}const{x:m,y:x}=y.toAffine();if(!n.isValid(m)||!n.isValid(x))throw new Error("bad point: x or y not FE");if(!c(m,x))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(m,x,I){if(m==null||!n.isValid(m))throw new Error("x required");if(x==null||!n.isValid(x)||n.is0(x))throw new Error("y required");if(I==null||!n.isValid(I))throw new Error("z required");this.px=m,this.py=x,this.pz=I,Object.freeze(this)}static fromAffine(m){const{x,y:I}=m||{};if(!m||!n.isValid(x)||!n.isValid(I))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const P=E=>n.eql(E,n.ZERO);return P(x)&&P(I)?h.ZERO:new h(x,I,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const x=Fo(n,m.map(I=>I.pz));return m.map((I,P)=>I.toAffine(x[P])).map(h.fromAffine)}static fromHex(m){const x=h.fromAffine(i(se("pointHex",m)));return x.assertValidity(),x}static fromPrivateKey(m){return h.BASE.multiply(d(m))}static msm(m,x){return td(h,r,m,x)}_setWindowSize(m){B.setWindowSize(this,m)}assertValidity(){p(this)}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){l(m);const{px:x,py:I,pz:P}=this,{px:E,py:T,pz:R}=m,S=n.eql(n.mul(x,R),n.mul(E,P)),F=n.eql(n.mul(I,R),n.mul(T,P));return S&&F}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:x}=t,I=n.mul(x,Cn),{px:P,py:E,pz:T}=this;let R=n.ZERO,S=n.ZERO,F=n.ZERO,k=n.mul(P,P),U=n.mul(E,E),w=n.mul(T,T),$=n.mul(P,E);return $=n.add($,$),F=n.mul(P,T),F=n.add(F,F),R=n.mul(m,F),S=n.mul(I,w),S=n.add(R,S),R=n.sub(U,S),S=n.add(U,S),S=n.mul(R,S),R=n.mul($,R),F=n.mul(I,F),w=n.mul(m,w),$=n.sub(k,w),$=n.mul(m,$),$=n.add($,F),F=n.add(k,k),k=n.add(F,k),k=n.add(k,w),k=n.mul(k,$),S=n.add(S,k),w=n.mul(E,T),w=n.add(w,w),k=n.mul(w,$),R=n.sub(R,k),F=n.mul(w,U),F=n.add(F,F),F=n.add(F,F),new h(R,S,F)}add(m){l(m);const{px:x,py:I,pz:P}=this,{px:E,py:T,pz:R}=m;let S=n.ZERO,F=n.ZERO,k=n.ZERO;const U=t.a,w=n.mul(t.b,Cn);let $=n.mul(x,E),z=n.mul(I,T),A=n.mul(P,R),C=n.add(x,I),O=n.add(E,T);C=n.mul(C,O),O=n.add($,z),C=n.sub(C,O),O=n.add(x,P);let G=n.add(E,R);return O=n.mul(O,G),G=n.add($,A),O=n.sub(O,G),G=n.add(I,P),S=n.add(T,R),G=n.mul(G,S),S=n.add(z,A),G=n.sub(G,S),k=n.mul(U,O),S=n.mul(w,A),k=n.add(S,k),S=n.sub(z,k),k=n.add(z,k),F=n.mul(S,k),z=n.add($,$),z=n.add(z,$),A=n.mul(U,A),O=n.mul(w,O),z=n.add(z,A),A=n.sub($,A),A=n.mul(U,A),O=n.add(O,A),$=n.mul(z,O),F=n.add(F,$),$=n.mul(G,O),S=n.mul(C,S),S=n.sub(S,$),$=n.mul(C,z),k=n.mul(G,k),k=n.add(k,$),new h(S,F,k)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return B.wNAFCached(this,m,h.normalizeZ)}multiplyUnsafe(m){const{endo:x,n:I}=t;et("scalar",m,Ee,I);const P=h.ZERO;if(m===Ee)return P;if(this.is0()||m===D)return this;if(!x||B.hasPrecomputes(this))return B.wNAFCachedUnsafe(this,m,h.normalizeZ);let{k1neg:E,k1:T,k2neg:R,k2:S}=x.splitScalar(m),F=P,k=P,U=this;for(;T>Ee||S>Ee;)T&D&&(F=F.add(U)),S&D&&(k=k.add(U)),U=U.double(),T>>=D,S>>=D;return E&&(F=F.negate()),R&&(k=k.negate()),k=new h(n.mul(k.px,x.beta),k.py,k.pz),F.add(k)}multiply(m){const{endo:x,n:I}=t;et("scalar",m,D,I);let P,E;if(x){const{k1neg:T,k1:R,k2neg:S,k2:F}=x.splitScalar(m);let{p:k,f:U}=this.wNAF(R),{p:w,f:$}=this.wNAF(F);k=B.constTimeNegate(T,k),w=B.constTimeNegate(S,w),w=new h(n.mul(w.px,x.beta),w.py,w.pz),P=k.add(w),E=U.add($)}else{const{p:T,f:R}=this.wNAF(m);P=T,E=R}return h.normalizeZ([P,E])[0]}multiplyAndAddUnsafe(m,x,I){const P=h.BASE,E=(R,S)=>S===Ee||S===D||!R.equals(P)?R.multiplyUnsafe(S):R.multiply(S),T=E(this,x).add(E(m,I));return T.is0()?void 0:T}toAffine(m){return b(this,m)}isTorsionFree(){const{h:m,isTorsionFree:x}=t;if(m===D)return!0;if(x)return x(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:x}=t;return m===D?this:x?x(h,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return yt("isCompressed",m),this.assertValidity(),s(h,this,m)}toHex(m=!0){return yt("isCompressed",m),gt(this.toRawBytes(m))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const{endo:g,nBitLength:v}=t,B=ed(h,g?Math.ceil(v/2):v);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:d,weierstrassEquation:o,isWithinCurveOrder:f}}function od(e){const t=_o(e);return nn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function ad(e){const t=od(e),{Fp:n,n:r,nByteLength:s,nBitLength:i}=t,o=n.BYTES+1,c=2*n.BYTES+1;function a(w){return J(w,r)}function u(w){return Jn(w,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:b}=id({...t,toBytes(w,$,z){const A=$.toAffine(),C=n.toBytes(A.x),O=jt;return yt("isCompressed",z),z?O(Uint8Array.from([$.hasEvenY()?2:3]),C):O(Uint8Array.from([4]),C,n.toBytes(A.y))},fromBytes(w){const $=w.length,z=w[0],A=w.subarray(1);if($===o&&(z===2||z===3)){const C=Me(A);if(!Ir(C,D,n.ORDER))throw new Error("Point is not on curve");const O=l(C);let G;try{G=n.sqrt(O)}catch(Z){const j=Z instanceof Error?": "+Z.message:"";throw new Error("Point is not on curve"+j)}const H=(G&D)===D;return(z&1)===1!==H&&(G=n.neg(G)),{x:C,y:G}}else if($===c&&z===4){const C=n.fromBytes(A.subarray(0,n.BYTES)),O=n.fromBytes(A.subarray(n.BYTES,2*n.BYTES));return{x:C,y:O}}else{const C=o,O=c;throw new Error("invalid Point, expected length of "+C+", or uncompressed "+O+", got "+$)}}});function p(w){const $=r>>D;return w>$}function h(w){return p(w)?a(-w):w}const g=(w,$,z)=>Me(w.slice($,z));class v{constructor($,z,A){et("r",$,D,r),et("s",z,D,r),this.r=$,this.s=z,A!=null&&(this.recovery=A),Object.freeze(this)}static fromCompact($){const z=s;return $=se("compactSignature",$,z*2),new v(g($,0,z),g($,z,2*z))}static fromDER($){const{r:z,s:A}=Pe.toSig(se("DER",$));return new v(z,A)}assertValidity(){}addRecoveryBit($){return new v(this.r,this.s,$)}recoverPublicKey($){const{r:z,s:A,recovery:C}=this,O=P(se("msgHash",$));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");const G=C===2||C===3?z+t.n:z;if(G>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=(C&1)===0?"02":"03",V=f.fromHex(H+Fn(G,n.BYTES)),Z=u(G),j=a(-O*Z),W=a(A*Z),ke=f.BASE.multiplyAndAddUnsafe(V,j,W);if(!ke)throw new Error("point at infinify");return ke.assertValidity(),ke}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ht(this.toDERHex())}toDERHex(){return Pe.hexFromSig(this)}toCompactRawBytes(){return Ht(this.toCompactHex())}toCompactHex(){const $=s;return Fn(this.r,$)+Fn(this.s,$)}}const B={isValidPrivateKey(w){try{return d(w),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const w=Ro(t.n);return Jf(t.randomBytes(w),t.n)},precompute(w=8,$=f.BASE){return $._setWindowSize(w),$.multiply(BigInt(3)),$}};function y(w,$=!0){return f.fromPrivateKey(w).toRawBytes($)}function m(w){if(typeof w=="bigint")return!1;if(w instanceof f)return!0;const z=se("key",w).length,A=n.BYTES,C=A+1,O=2*A+1;if(!(t.allowedPrivateKeyLengths||s===C))return z===C||z===O}function x(w,$,z=!0){if(m(w)===!0)throw new Error("first arg must be private key");if(m($)===!1)throw new Error("second arg must be public key");return f.fromHex($).multiply(d(w)).toRawBytes(z)}const I=t.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const $=Me(w),z=w.length*8-i;return z>0?$>>BigInt(z):$},P=t.bits2int_modN||function(w){return a(I(w))},E=tn(i);function T(w){return et("num < 2^"+i,w,Ee,E),St(w,s)}function R(w,$,z=S){if(["recovered","canonical"].some(Oe=>Oe in z))throw new Error("sign() legacy options not supported");const{hash:A,randomBytes:C}=t;let{lowS:O,prehash:G,extraEntropy:H}=z;O==null&&(O=!0),w=se("msgHash",w),_s(z),G&&(w=se("prehashed msgHash",A(w)));const V=P(w),Z=d($),j=[T(Z),T(V)];if(H!=null&&H!==!1){const Oe=H===!0?C(n.BYTES):H;j.push(se("extraEntropy",Oe))}const W=jt(...j),ke=V;function hn(Oe){const We=I(Oe);if(!b(We))return;const pn=u(We),ut=f.BASE.multiply(We).toAffine(),Le=a(ut.x);if(Le===Ee)return;const ft=a(pn*a(ke+Le*Z));if(ft===Ee)return;let dt=(ut.x===Le?0:2)|Number(ut.y&D),Ke=ft;return O&&p(ft)&&(Ke=h(ft),dt^=1),new v(Le,Ke,dt)}return{seed:W,k2sig:hn}}const S={lowS:t.lowS,prehash:!1},F={lowS:t.lowS,prehash:!1};function k(w,$,z=S){const{seed:A,k2sig:C}=R(w,$,z),O=t;return Bc(O.hash.outputLen,O.nByteLength,O.hmac)(A,C)}f.BASE._setWindowSize(8);function U(w,$,z,A=F){var dt;const C=w;$=se("msgHash",$),z=se("publicKey",z);const{lowS:O,prehash:G,format:H}=A;if(_s(A),"strict"in A)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const V=typeof C=="string"||$t(C),Z=!V&&!H&&typeof C=="object"&&C!==null&&typeof C.r=="bigint"&&typeof C.s=="bigint";if(!V&&!Z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let j,W;try{if(Z&&(j=new v(C.r,C.s)),V){try{H!=="compact"&&(j=v.fromDER(C))}catch(Ke){if(!(Ke instanceof Pe.Err))throw Ke}!j&&H!=="der"&&(j=v.fromCompact(C))}W=f.fromHex(z)}catch{return!1}if(!j||O&&j.hasHighS())return!1;G&&($=t.hash($));const{r:ke,s:hn}=j,Oe=P($),We=u(hn),pn=a(Oe*We),ut=a(ke*We),Le=(dt=f.BASE.multiplyAndAddUnsafe(W,pn,ut))==null?void 0:dt.toAffine();return Le?a(Le.x)===ke:!1}return{CURVE:t,getPublicKey:y,getSharedSecret:x,sign:k,verify:U,ProjectivePoint:f,Signature:v,utils:B}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function cd(e){return{hash:e,hmac:(t,...n)=>$o(e,t,$a(...n)),randomBytes:Aa}}function ud(e,t){const n=r=>ad({...e,...cd(r)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mo=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ms=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),fd=BigInt(0),dd=BigInt(1),Qn=BigInt(2),Gs=(e,t)=>(e+t/Qn)/t;function ld(e){const t=Mo,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),a=BigInt(88),u=e*e*e%t,f=u*u*e%t,d=re(f,n,t)*f%t,l=re(d,n,t)*f%t,b=re(l,Qn,t)*u%t,p=re(b,s,t)*b%t,h=re(p,i,t)*p%t,g=re(h,c,t)*h%t,v=re(g,a,t)*g%t,B=re(v,c,t)*h%t,y=re(B,n,t)*f%t,m=re(y,o,t)*p%t,x=re(m,r,t)*u%t,I=re(x,Qn,t);if(!er.eql(er.sqr(I),e))throw new Error("Cannot find square root");return I}const er=Gr(Mo,void 0,void 0,{sqrt:ld}),Ur=ud({a:fd,b:BigInt(7),Fp:er,n:Ms,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ms,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-dd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),c=Gs(i*e,t),a=Gs(-r*e,t);let u=J(e-c*n-a*s,t),f=J(-c*r-a*i,t);const d=u>o,l=f>o;if(d&&(u=t-u),l&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:l,k2:f}}}},Ci),bd=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Ur},Symbol.toStringTag,{value:"Module"}));function Go(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new zn({signature:e});if(typeof e.s>"u")throw new zn({signature:e});if(n&&typeof e.yParity>"u")throw new zn({signature:e});if(e.r<0n||e.r>Fs)throw new xd({value:e.r});if(e.s<0n||e.s>Fs)throw new vd({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new jr({value:e.yParity})}function hd(e){return Uo(de(e))}function Uo(e){if(e.length!==130&&e.length!==132)throw new wd({signature:e});const t=BigInt(ge(e,0,32)),n=BigInt(ge(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return Hr(s)}catch{throw new jr({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function pd(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return md(e)}function md(e){const t=typeof e=="string"?Uo(e):e instanceof Uint8Array?hd(e):typeof e.r=="string"?gd(e):e.v?yd(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return Go(t),t}function yd(e){return{r:e.r,s:e.s,yParity:Hr(e.v)}}function gd(e){const t=(()=>{const n=e.v?Number(e.v):void 0;let r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Hr(n)),typeof r!="number")throw new jr({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Hr(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Pd({value:e})}class wd extends M{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ne(Kc(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class zn extends M{constructor({signature:t}){super(`Signature \`${Ji(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class xd extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class vd extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class jr extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Pd extends M{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function Ed(e,t={}){return typeof e.chainId=="string"?Bd(e):{...e,...t.signature}}function Bd(e){const{address:t,chainId:n,nonce:r}=e,s=pd(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}const Id="0x8010801080108010801080108010801080108010801080108010801080108010",Ad=Eo("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function Ho(e){if(typeof e=="string"){if(ge(e,-32)!==Id)throw new Td(e)}else Go(e.authorization)}function $d(e){Ho(e);const t=no(ge(e,-64,-32)),n=ge(e,-t-64,-64),r=ge(e,0,-t-64),[s,i,o]=Mf(Ad,n);return{authorization:Ed({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...o&&o!=="0x"?{data:o,to:i}:{}}}function Sd(e){try{return Ho(e),!0}catch{return!1}}let Td=class extends M{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function Tl(e){const{address:t,data:n,signature:r,to:s="hex"}=e,i=be([vt([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),lf]);return s==="hex"?i:$e(i)}function Nd(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function kd(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?ie(e.nonce):void 0,storageProof:e.storageProof?Nd(e.storageProof):void 0}}async function Fd(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?N(n):void 0,c=await e.request({method:"eth_getProof",params:[t,s,o||i]});return kd(c)}async function Cd(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?N(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,i||r]})}async function Dr(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:i,sender:o,nonce:c}){var l,b,p;const a=r||"latest",u=n!==void 0?N(n):void 0;let f=null;if(s?f=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?f=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,N(i)]},{dedupe:!0}):typeof i=="number"?f=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||a,N(i)]},{dedupe:!!u}):o&&typeof c=="number"&&(f=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[o,N(c)]},{dedupe:!0})),!f)throw new xi({blockHash:t,blockNumber:n,blockTag:a,hash:s,index:i});return(((p=(b=(l=e.chain)==null?void 0:l.formatters)==null?void 0:b.transaction)==null?void 0:p.format)||Qt)(f,"getTransaction")}async function zd(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([L(e,Nt,"getBlockNumber")({}),t?L(e,Dr,"getTransaction")({hash:t}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function zt(e,{hash:t}){var s,i,o;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new vi({hash:t});return(((o=(i=(s=e.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Tr)(n,"getTransactionReceipt")}async function Rd(e,t){var B;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:i,blockOverrides:o,blockTag:c,stateOverride:a}=t,u=t.contracts,{batchSize:f=t.batchSize??1024,deployless:d=t.deployless??!1}=typeof((B=e.batch)==null?void 0:B.multicall)=="object"?e.batch.multicall:{},l=(()=>{if(t.multicallAddress)return t.multicallAddress;if(d)return null;if(e.chain)return at({blockNumber:i,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),b=[[]];let p=0,h=0;for(let y=0;y<u.length;y++){const{abi:m,address:x,args:I,functionName:P}=u[y];try{const E=he({abi:m,args:I,functionName:P});h+=(E.length-2)/2,f>0&&h>f&&b[p].length>0&&(p++,h=(E.length-2)/2,b[p]=[]),b[p]=[...b[p],{allowFailure:!0,callData:E,target:x}]}catch(E){const T=rt(E,{abi:m,address:x,args:I,docsPath:"/docs/contract/multicall",functionName:P,sender:n});if(!s)throw T;b[p]=[...b[p],{allowFailure:!0,callData:"0x",target:x}]}}const g=await Promise.allSettled(b.map(y=>L(e,le,"readContract")({...l===null?{code:$r}:{address:l},abi:Ot,account:n,args:[y],authorizationList:r,blockNumber:i,blockOverrides:o,blockTag:c,functionName:"aggregate3",stateOverride:a}))),v=[];for(let y=0;y<g.length;y++){const m=g[y];if(m.status==="rejected"){if(!s)throw m.reason;for(let I=0;I<b[y].length;I++)v.push({status:"failure",error:m.reason,result:void 0});continue}const x=m.value;for(let I=0;I<x.length;I++){const{returnData:P,success:E}=x[I],{callData:T}=b[y][I],{abi:R,address:S,functionName:F,args:k}=u[v.length];try{if(T==="0x")throw new Pt;if(!E)throw new Kt({data:P});const U=Ze({abi:R,args:k,data:P,functionName:F});v.push(s?{result:U,status:"success"}:U)}catch(U){const w=rt(U,{abi:R,address:S,args:k,docsPath:"/docs/contract/multicall",functionName:F});if(!s)throw w;v.push({error:w,result:void 0,status:"failure"})}}}if(v.length!==u.length)throw new _("multicall results mismatch");return v}async function tr(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:c}=t;try{const a=[];for(const l of s){const b=l.blockOverrides?io(l.blockOverrides):void 0,p=l.calls.map(g=>{const v=g,B=v.account?te(v.account):void 0,y=v.abi?he(v):v.data,m={...v,account:B,data:v.dataSuffix?si([y||"0x",v.dataSuffix]):y,from:v.from??(B==null?void 0:B.address)};return ot(m),At(m)}),h=l.stateOverrides?lr(l.stateOverrides):void 0;a.push({blockOverrides:b,calls:p,stateOverrides:h})}const f=(typeof n=="bigint"?N(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:a,returnFullTransactions:i,traceTransfers:o,validation:c},f]})).map((l,b)=>({...hr(l),calls:l.calls.map((p,h)=>{var R,S;const{abi:g,args:v,functionName:B,to:y}=s[b].calls[h],m=((R=p.error)==null?void 0:R.data)??p.returnData,x=BigInt(p.gasUsed),I=(S=p.logs)==null?void 0:S.map(F=>Te(F)),P=p.status==="0x1"?"success":"failure",E=g&&P==="success"&&m!=="0x"?Ze({abi:g,data:m,functionName:B}):null,T=(()=>{var k;if(P==="success")return;let F;if(((k=p.error)==null?void 0:k.data)==="0x"?F=new Pt:p.error&&(F=new Kt(p.error)),!!F)return rt(F,{abi:g??[],address:y??"0x",args:v,functionName:B??"<unknown>"})})();return{data:m,gasUsed:x,logs:I,status:P,...P==="success"?{result:E}:{error:T}}})}))}catch(a){const u=a,f=Yt(u,{});throw f instanceof xt?u:f}}function nr(e){let t=!0,n="",r=0,s="",i=!1;for(let o=0;o<e.length;o++){const c=e[o];if(["(",")",","].includes(c)&&(t=!0),c==="("&&r++,c===")"&&r--,!!t){if(r===0){if(c===" "&&["event","function","error",""].includes(s))s="";else if(s+=c,c===")"){i=!0;break}continue}if(c===" "){e[o-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=c,n+=c}}if(!i)throw new M("Unable to normalize signature.");return s}function rr(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Wn(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,i)=>rr(Object.values(e)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>rr(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function jo(e,t,n){for(const r in e){const s=e[r],i=t[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return jo(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Wn(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Wn(n[r],{strict:!1}):!1)return o}}function Do(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?us(e):e;return{...r,...n?{hash:Xe(r)}:{}}}function ln(e,t,n){const{args:r=[],prepare:s=!0}=n??{},i=Yc(t,{strict:!1}),o=e.filter(u=>i?u.type==="function"||u.type==="error"?Vo(u)===ge(t,0,4):u.type==="event"?Xe(u)===t:!1:"name"in u&&u.name===t);if(o.length===0)throw new Dt({name:t});if(o.length===1)return{...o[0],...s?{hash:Xe(o[0])}:{}};let c;for(const u of o){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:Xe(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((d,l)=>{const b="inputs"in u&&u.inputs[l];return b?rr(d,b):!1})){if(c&&"inputs"in c&&c.inputs){const d=jo(u.inputs,c.inputs,r);if(d)throw new Ld({abiItem:u,type:d[0]},{abiItem:c,type:d[1]})}c=u}}const a=(()=>{if(c)return c;const[u,...f]=o;return{...u,overloads:f}})();if(!a)throw new Dt({name:t});return{...a,...s?{hash:Xe(a)}:{}}}function Vo(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return ln(n,r)}return e[0]})();return ge(Xe(t),0,4)}function Od(...e){const t=(()=>{if(Array.isArray(e[0])){const[r,s]=e;return ln(r,s)}return e[0]})(),n=typeof t=="string"?t:Ln(t);return nr(n)}function Xe(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return ln(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:xo(Ar(Od(t)))}class Ld extends M{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${nr(Ln(t.abiItem))}\`, and`,`\`${n.type}\` in \`${nr(Ln(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Dt extends M{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function _d(...e){var i;const[t,n]=(()=>{if(Array.isArray(e[0])){const[o,c]=e;return[Gd(o),c]}return e})(),{bytecode:r,args:s}=n;return fe(r,(i=t.inputs)!=null&&i.length&&(s!=null&&s.length)?_r(t.inputs,s):"0x")}function Md(e){return Do(e)}function Gd(e){const t=e.find(n=>n.type==="constructor");if(!t)throw new Dt({name:"constructor"});return t}function Ud(...e){const[t,n=[]]=(()=>{if(Array.isArray(e[0])){const[u,f,d]=e;return[Us(u,f,{args:d}),d]}const[c,a]=e;return[c,a]})(),{overloads:r}=t,s=r?Us([t,...r],t.name,{args:n}):t,i=Hd(s),o=n.length>0?_r(s.inputs,n):void 0;return o?fe(i,o):i}function Ye(e,t={}){return Do(e,t)}function Us(e,t,n){const r=ln(e,t,n);if(r.type!=="function")throw new Dt({name:t,type:"function"});return r}function Hd(e){return Vo(e)}const jd="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",me="0x0000000000000000000000000000000000000000",Dd="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Vd(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:c,validation:a}=t,u=t.account?te(t.account):void 0;if(o&&!u)throw new _("`account` is required when `traceAssetChanges` is true");const f=u?_d(Md("constructor(bytes, bytes)"),{bytecode:oo,args:[Dd,Ud(Ye("function getBalance(address)"),[u.address])]}):void 0,d=o?await Promise.all(t.calls.map(async A=>{if(!A.data&&!A.abi)return;const{accessList:C}=await mo(e,{account:u.address,...A,data:A.abi?he(A):A.data});return C.map(({address:O,storageKeys:G})=>G.length>0?O:null)})).then(A=>A.flat().filter(Boolean)):[],l=await tr(e,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:f}],stateOverrides:i},{calls:d.map((A,C)=>({abi:[Ye("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:A,from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]}]:[],{calls:[...s,{}].map(A=>({...A,from:u==null?void 0:u.address})),stateOverrides:i},...o?[{calls:[{data:f}]},{calls:d.map((A,C)=>({abi:[Ye("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:A,from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]},{calls:d.map((A,C)=>({to:A,abi:[Ye("function decimals() returns (uint256)")],functionName:"decimals",from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]},{calls:d.map((A,C)=>({to:A,abi:[Ye("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]},{calls:d.map((A,C)=>({to:A,abi:[Ye("function symbol() returns (string)")],functionName:"symbol",from:me,nonce:C})),stateOverrides:[{address:me,nonce:0}]}]:[]],traceTransfers:c,validation:a}),b=o?l[2]:l[0],[p,h,,g,v,B,y,m]=o?l:[],{calls:x,...I}=b,P=x.slice(0,-1)??[],E=(p==null?void 0:p.calls)??[],T=(h==null?void 0:h.calls)??[],R=[...E,...T].map(A=>A.status==="success"?ce(A.data):null),S=(g==null?void 0:g.calls)??[],F=(v==null?void 0:v.calls)??[],k=[...S,...F].map(A=>A.status==="success"?ce(A.data):null),U=((B==null?void 0:B.calls)??[]).map(A=>A.status==="success"?A.result:null),w=((m==null?void 0:m.calls)??[]).map(A=>A.status==="success"?A.result:null),$=((y==null?void 0:y.calls)??[]).map(A=>A.status==="success"?A.result:null),z=[];for(const[A,C]of k.entries()){const O=R[A];if(typeof C!="bigint"||typeof O!="bigint")continue;const G=U[A-1],H=w[A-1],V=$[A-1],Z=A===0?{address:jd,decimals:18,symbol:"ETH"}:{address:d[A-1],decimals:V||G?Number(G??1):void 0,symbol:H??void 0};z.some(j=>j.token.address===Z.address)||z.push({token:Z,value:{pre:O,post:C,diff:C-O}})}return{assetChanges:z,block:I,results:P}}const qo="0x6492649264926492649264926492649264926492649264926492649264926492";function qd(e){if(ge(e,-32)!==qo)throw new Kd(e)}function Zd(e){const{data:t,signature:n,to:r}=e;return fe(_r(Eo("address, bytes, bytes"),[r,t,n]),qo)}function Wd(e){try{return qd(e),!0}catch{return!1}}class Kd extends M{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function Yd({r:e,s:t,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new Ur.Signature(ce(e),ce(t)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:$e(o)}async function bn(e,t){var a,u,f,d;const{address:n,chain:r=e.chain,hash:s,erc6492VerifierAddress:i=t.universalSignatureVerifierAddress??((u=(a=r==null?void 0:r.contracts)==null?void 0:a.erc6492Verifier)==null?void 0:u.address),multicallAddress:o=t.multicallAddress??((d=(f=r==null?void 0:r.contracts)==null?void 0:f.multicall3)==null?void 0:d.address)}=t;if(r!=null&&r.verifyHash)return await r.verifyHash(e,t);const c=(()=>{const l=t.signature;return ht(l)?l:typeof l=="object"&&"r"in l&&"s"in l?Yd(l):q(l)})();try{return Sd(c)?await Jd(e,{...t,multicallAddress:o,signature:c}):await Xd(e,{...t,verifierAddress:i,signature:c})}catch(l){try{if(en(ii(n),await Bi({hash:s,signature:c})))return!0}catch{}if(l instanceof Ve)return!1;throw l}}async function Jd(e,t){var g;const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:o}=t,{authorization:c,data:a,signature:u,to:f}=$d(t.signature);if(await Zn(e,{address:n,blockNumber:r,blockTag:s})===be(["0xef0100",c.address]))return await Qd(e,{address:n,blockNumber:r,blockTag:s,hash:i,signature:u});const l={address:c.address,chainId:Number(c.chainId),nonce:Number(c.nonce),r:N(c.r,{size:32}),s:N(c.s,{size:32}),yParity:c.yParity};if(!await df({address:n,authorization:l}))throw new Ve;const p=await L(e,le,"readContract")({...o?{address:o}:{code:$r},authorizationList:[l],abi:Ot,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...a?[{allowFailure:!0,target:f??n,callData:a}]:[],{allowFailure:!0,target:n,callData:he({abi:qs,functionName:"isValidSignature",args:[i,u]})}]]}),h=(g=p[p.length-1])==null?void 0:g.returnData;if(h!=null&&h.startsWith("0x1626ba7e"))return!0;throw new Ve}async function Xd(e,t){const{address:n,factory:r,factoryData:s,hash:i,signature:o,verifierAddress:c,...a}=t,u=await(async()=>!r&&!s||Wd(o)?o:Zd({data:s,signature:o,to:r}))(),f=c?{to:c,data:he({abi:rs,functionName:"isValidSig",args:[n,i,u]}),...a}:{data:Sr({abi:rs,args:[n,i,u],bytecode:nu}),...a},{data:d}=await L(e,on,"call")(f).catch(l=>{throw l instanceof Pi?new Ve:l});if(ia(d??"0x0"))return!0;throw new Ve}async function Qd(e,t){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:o}=t;if((await L(e,le,"readContract")({address:n,abi:qs,args:[i,o],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(a=>{throw a instanceof Ei?new Ve:a})).startsWith("0x1626ba7e"))return!0;throw new Ve}class Ve extends Error{}async function el(e,{address:t,message:n,factory:r,factoryData:s,signature:i,...o}){const c=oi(n);return L(e,bn,"verifyHash")({address:t,factory:r,factoryData:s,hash:c,signature:i,...o})}async function tl(e,t){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:c,types:a,domain:u,...f}=t,d=Sa({message:o,primaryType:c,types:a,domain:u});return L(e,bn,"verifyHash")({address:n,factory:r,factoryData:s,hash:d,signature:i,...f})}function Zo(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=e.pollingInterval}){const c=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let a;return c?(()=>{const d=we(["watchBlockNumber",e.uid,t,n,o]);return Ne(d,{onBlockNumber:r,onError:s},l=>ct(async()=>{var b;try{const p=await L(e,Nt,"getBlockNumber")({cacheTime:0});if(a!==void 0){if(p===a)return;if(p-a>1&&n)for(let h=a+1n;h<p;h++)l.onBlockNumber(h,a),a=h}(a===void 0||p>a)&&(l.onBlockNumber(p,a),a=p)}catch(p){(b=l.onError)==null||b.call(l,p)}},{emitOnBegin:t,interval:o}))})():(()=>{const d=we(["watchBlockNumber",e.uid,t,n]);return Ne(d,{onBlockNumber:r,onError:s},l=>{let b=!0,p=()=>b=!1;return(async()=>{try{const h=(()=>{if(e.transport.type==="fallback"){const v=e.transport.transports.find(B=>B.config.type==="webSocket"||B.config.type==="ipc");return v?v.value:e.transport}return e.transport})(),{unsubscribe:g}=await h.subscribe({params:["newHeads"],onData(v){var y;if(!b)return;const B=ce((y=v.result)==null?void 0:y.number);l.onBlockNumber(B,a),a=B},onError(v){var B;(B=l.onError)==null||B.call(l,v)}});p=g,b||p()}catch(h){s==null||s(h)}})(),()=>p()})})()}async function nl(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:c=({count:x})=>~~(1<<x)*200,timeout:a=18e4}=t,u=we(["waitForTransactionReceipt",e.uid,s]),f=(()=>{var x;return t.pollingInterval?t.pollingInterval:(x=e.chain)!=null&&x.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval})();let d,l,b,p=!1,h,g;const{promise:v,resolve:B,reject:y}=Ds(),m=a?setTimeout(()=>{g==null||g(),h==null||h(),y(new G0({hash:s}))},a):void 0;return h=Ne(u,{onReplaced:i,resolve:B,reject:y},async x=>{if(b=await L(e,zt,"getTransactionReceipt")({hash:s}).catch(()=>{}),b&&r<=1){clearTimeout(m),x.resolve(b),h==null||h();return}g=L(e,Zo,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:f,async onBlockNumber(I){const P=T=>{clearTimeout(m),g==null||g(),T(),h==null||h()};let E=I;if(!p)try{if(b){if(r>1&&(!b.blockNumber||E-b.blockNumber+1n<r))return;P(()=>x.resolve(b));return}if(n&&!d&&(p=!0,await Rn(async()=>{d=await L(e,Dr,"getTransaction")({hash:s}),d.blockNumber&&(E=d.blockNumber)},{delay:c,retryCount:o}),p=!1),b=await L(e,zt,"getTransactionReceipt")({hash:s}),r>1&&(!b.blockNumber||E-b.blockNumber+1n<r))return;P(()=>x.resolve(b))}catch(T){if(T instanceof xi||T instanceof vi){if(!d){p=!1;return}try{l=d,p=!0;const R=await Rn(()=>L(e,ae,"getBlock")({blockNumber:E,includeTransactions:!0}),{delay:c,retryCount:o,shouldRetry:({error:k})=>k instanceof Ti});p=!1;const S=R.transactions.find(({from:k,nonce:U})=>k===l.from&&U===l.nonce);if(!S||(b=await L(e,zt,"getTransactionReceipt")({hash:S.hash}),r>1&&(!b.blockNumber||E-b.blockNumber+1n<r)))return;let F="replaced";S.to===l.to&&S.value===l.value&&S.input===l.input?F="repriced":S.from===S.to&&S.value===0n&&(F="cancelled"),P(()=>{var k;(k=x.onReplaced)==null||k.call(x,{reason:F,replacedTransaction:l,transaction:S,transactionReceipt:b}),x.resolve(b)})}catch(R){P(()=>x.reject(R))}}else P(()=>x.reject(T))}}})}),v}function rl(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:c,pollingInterval:a=e.pollingInterval}){const u=typeof c<"u"?c:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),f=o??!1;let d;return u?(()=>{const p=we(["watchBlocks",e.uid,t,n,r,f,a]);return Ne(p,{onBlock:s,onError:i},h=>ct(async()=>{var g;try{const v=await L(e,ae,"getBlock")({blockTag:t,includeTransactions:f});if(v.number!==null&&(d==null?void 0:d.number)!=null){if(v.number===d.number)return;if(v.number-d.number>1&&n)for(let B=(d==null?void 0:d.number)+1n;B<v.number;B++){const y=await L(e,ae,"getBlock")({blockNumber:B,includeTransactions:f});h.onBlock(y,d),d=y}}((d==null?void 0:d.number)==null||t==="pending"&&(v==null?void 0:v.number)==null||v.number!==null&&v.number>d.number)&&(h.onBlock(v,d),d=v)}catch(v){(g=h.onError)==null||g.call(h,v)}},{emitOnBegin:r,interval:a}))})():(()=>{let p=!0,h=!0,g=()=>p=!1;return(async()=>{try{r&&L(e,ae,"getBlock")({blockTag:t,includeTransactions:f}).then(y=>{p&&h&&(s(y,void 0),h=!1)}).catch(i);const v=(()=>{if(e.transport.type==="fallback"){const y=e.transport.transports.find(m=>m.config.type==="webSocket"||m.config.type==="ipc");return y?y.value:e.transport}return e.transport})(),{unsubscribe:B}=await v.subscribe({params:["newHeads"],async onData(y){var x;if(!p)return;const m=await L(e,ae,"getBlock")({blockNumber:(x=y.result)==null?void 0:x.number,includeTransactions:f}).catch(()=>{});p&&(s(m,d),h=!1,d=m)},onError(y){i==null||i(y)}});g=B,p||g()}catch(v){i==null||i(v)}})(),()=>g()})()}function sl(e,{address:t,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:c,onLogs:a,poll:u,pollingInterval:f=e.pollingInterval,strict:d}){const l=typeof u<"u"?u:typeof o=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),b=d??!1;return l?(()=>{const g=we(["watchEvent",t,n,r,e.uid,s,f,o]);return Ne(g,{onLogs:a,onError:c},v=>{let B;o!==void 0&&(B=o-1n);let y,m=!1;const x=ct(async()=>{var I;if(!m){try{y=await L(e,yo,"createEventFilter")({address:t,args:n,event:s,events:i,strict:b,fromBlock:o})}catch{}m=!0;return}try{let P;if(y)P=await L(e,an,"getFilterChanges")({filter:y});else{const E=await L(e,Nt,"getBlockNumber")({});B&&B!==E?P=await L(e,Pr,"getLogs")({address:t,args:n,event:s,events:i,fromBlock:B+1n,toBlock:E}):P=[],B=E}if(P.length===0)return;if(r)v.onLogs(P);else for(const E of P)v.onLogs([E])}catch(P){y&&P instanceof sr&&(m=!1),(I=v.onError)==null||I.call(v,P)}},{emitOnBegin:!0,interval:f});return async()=>{y&&await L(e,cn,"uninstallFilter")({filter:y}),x()}})})():(()=>{let g=!0,v=()=>g=!1;return(async()=>{try{const B=(()=>{if(e.transport.type==="fallback"){const I=e.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return I?I.value:e.transport}return e.transport})(),y=i??(s?[s]:void 0);let m=[];y&&(m=[y.flatMap(P=>Et({abi:[P],eventName:P.name,args:n}))],s&&(m=m[0]));const{unsubscribe:x}=await B.subscribe({params:["logs",{address:t,topics:m}],onData(I){var E;if(!g)return;const P=I.result;try{const{eventName:T,args:R}=Ut({abi:y??[],data:P.data,topics:P.topics,strict:b}),S=Te(P,{args:R,eventName:T});a([S])}catch(T){let R,S;if(T instanceof Mt||T instanceof ar){if(d)return;R=T.abiItem.name,S=(E=T.abiItem.inputs)==null?void 0:E.some(k=>!("name"in k&&k.name))}const F=Te(P,{args:S?[]:{},eventName:R});a([F])}},onError(I){c==null||c(I)}});v=x,g||v()}catch(B){c==null||c(B)}})(),()=>v()})()}function il(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=we(["watchPendingTransactions",e.uid,t,i]);return Ne(u,{onTransactions:r,onError:n},f=>{let d;const l=ct(async()=>{var b;try{if(!d)try{d=await L(e,go,"createPendingTransactionFilter")({});return}catch(h){throw l(),h}const p=await L(e,an,"getFilterChanges")({filter:d});if(p.length===0)return;if(t)f.onTransactions(p);else for(const h of p)f.onTransactions([h])}catch(p){(b=f.onError)==null||b.call(f,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await L(e,cn,"uninstallFilter")({filter:d}),l()}})})():(()=>{let u=!0,f=()=>u=!1;return(async()=>{try{const{unsubscribe:d}=await e.transport.subscribe({params:["newPendingTransactions"],onData(l){if(!u)return;const b=l.result;r([b])},onError(l){n==null||n(l)}});f=d,u||f()}catch(d){n==null||n(d)}})(),()=>f()})()}function ol(e){var d,l,b;const{scheme:t,statement:n,...r}=((d=e.match(al))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:c,requestId:a,...u}=((l=e.match(cl))==null?void 0:l.groups)??{},f=(b=e.split("Resources:")[1])==null?void 0:b.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...c?{notBefore:new Date(c)}:{},...a?{requestId:a}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const al=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,cl=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function ul(e){const{address:t,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!oe(r.address,{strict:!1})||t&&!en(r.address,t))return!1}catch{return!1}return!0}async function fl(e,t){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:c,time:a=new Date,...u}=t,f=ol(s);if(!f.address||!ul({address:n,domain:r,message:f,nonce:i,scheme:o,time:a}))return!1;const l=oi(s);return bn(e,{address:f.address,hash:l,signature:c,...u})}async function dl(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){var c,a,u;const s=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,N(r)]:[t]},{retryCount:0}),o=(((u=(a=(c=e.chain)==null?void 0:c.formatters)==null?void 0:a.transactionReceipt)==null?void 0:u.format)||Tr)(s);if(o.status==="reverted"&&n)throw new M0({receipt:o});return o}function ll(e){return{call:t=>on(e,t),createAccessList:t=>mo(e,t),createBlockFilter:()=>Du(e),createContractEventFilter:t=>mi(e,t),createEventFilter:t=>yo(e,t),createPendingTransactionFilter:()=>go(e),estimateContractGas:t=>wc(e,t),estimateGas:t=>xr(e,t),getBalance:t=>Vu(e,t),getBlobBaseFee:()=>qu(e),getBlock:t=>ae(e,t),getBlockNumber:t=>Nt(e,t),getBlockTransactionCount:t=>Zu(e,t),getBytecode:t=>Zn(e,t),getChainId:()=>wr(e),getCode:t=>Zn(e,t),getContractEvents:t=>ji(e,t),getEip712Domain:t=>Ku(e,t),getEnsAddress:t=>Su(e,t),getEnsAvatar:t=>Uu(e,t),getEnsName:t=>Hu(e,t),getEnsResolver:t=>ju(e,t),getEnsText:t=>po(e,t),getFeeHistory:t=>Xu(e,t),estimateFeesPerGas:t=>rc(e,t),getFilterChanges:t=>an(e,t),getFilterLogs:t=>Qu(e,t),getGasPrice:()=>pr(e),getLogs:t=>Pr(e,t),getProof:t=>Fd(e,t),estimateMaxPriorityFeePerGas:t=>nc(e,t),fillTransaction:t=>Ui(e,t),getStorageAt:t=>Cd(e,t),getTransaction:t=>Dr(e,t),getTransactionConfirmations:t=>zd(e,t),getTransactionCount:t=>Fi(e,t),getTransactionReceipt:t=>zt(e,t),multicall:t=>Rd(e,t),prepareTransactionRequest:t=>Hi(e,t),readContract:t=>le(e,t),sendRawTransaction:t=>pu(e,t),sendRawTransactionSync:t=>dl(e,t),simulate:t=>tr(e,t),simulateBlocks:t=>tr(e,t),simulateCalls:t=>Vd(e,t),simulateContract:t=>au(e,t),verifyHash:t=>bn(e,t),verifyMessage:t=>el(e,t),verifySiweMessage:t=>fl(e,t),verifyTypedData:t=>tl(e,t),uninstallFilter:t=>cn(e,t),waitForTransactionReceipt:t=>nl(e,t),watchBlocks:t=>rl(e,t),watchBlockNumber:t=>Zo(e,t),watchContractEvent:t=>hu(e,t),watchEvent:t=>sl(e,t),watchPendingTransactions:t=>il(e,t)}}function Nl(e){const{key:t="public",name:n="Public Client"}=e;return vu({...e,key:t,name:n,type:"publicClient"}).extend(ll)}function kl(e){const{r:t,s:n}=Ur.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[s,i]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:N(t,{size:32}),s:N(n,{size:32}),v:s,yParity:i}:{r:N(t,{size:32}),s:N(n,{size:32}),yParity:i}}export{xu as $,He as A,Al as B,U0 as C,Nl as D,El as E,Pu as F,kl as G,Bl as H,Bt as I,un as J,Bu as K,on as L,t0 as M,Da as N,Za as O,Xa as P,Ja as Q,Ya as R,Wa as S,n0 as T,it as U,e0 as V,us as W,fs as X,Ka as Y,Qa as Z,Va as _,wr as a,zr as a$,ll as a0,jd as a1,me as a2,oo as a3,tu as a4,nu as a5,Xt as a6,Ti as a7,mu as a8,Vn as a9,Et as aA,Eu as aB,vr as aC,mr as aD,yr as aE,zi as aF,lc as aG,Mi as aH,mc as aI,at as aJ,v0 as aK,P0 as aL,Be as aM,E0 as aN,$u as aO,qn as aP,rt as aQ,hr as aR,Ni as aS,At as aT,J0 as aU,dc as aV,lu as aW,Bi as aX,V0 as aY,Yd as aZ,ot as a_,ao as aa,sn as ab,Pi as ac,H0 as ad,Kt as ae,lt as af,Nu as ag,Fr as ah,K0 as ai,Si as aj,br as ak,ec as al,m0 as am,F0 as an,C0 as ao,R0 as ap,O0 as aq,L0 as ar,_0 as as,xi as at,vi as au,G0 as av,Ut as aw,Ze as ax,Sr as ay,Ts as az,Fi as b,nf as b0,rf as b1,Gi as b2,fn as b3,fr as b4,$l as c,Zn as d,pi as e,It as f,L as g,k0 as h,en as i,Hn as j,Ei as k,rc as l,lr as m,Te as n,Tr as o,te as p,Ne as q,le as r,Tl as s,ct as t,vu as u,Pl as v,gl as w,wl as x,Qt as y,Il as z};
